<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="SpringBoot"><meta name="keywords" content="SpringBoot,Spring"><meta name="author" content="DaiHaojun"><meta name="copyright" content="DaiHaojun"><title>SpringBoot | myblog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="myblog" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81SpringBoot"><span class="toc-number">1.</span> <span class="toc-text">一、SpringBoot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81SpringBoot%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">1.1.</span> <span class="toc-text">1.1、SpringBoot的优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E3%80%81JavaConfig"><span class="toc-number">1.2.</span> <span class="toc-text">1.2、JavaConfig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E3%80%81-ImportResource"><span class="toc-number">1.3.</span> <span class="toc-text">1.3、@ImportResource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E3%80%81-PropertyResource"><span class="toc-number">1.4.</span> <span class="toc-text">1.4、@PropertyResource</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81SpringBoot%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">二、SpringBoot入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.</span> <span class="toc-text">2.1、创建SpringBoot项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1%E3%80%81%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">2.1.1.</span> <span class="toc-text">2.1.1、第一种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2%E3%80%81%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.1.2、第二种方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8CSpringBoot%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.2.</span> <span class="toc-text">2.2、直接运行SpringBoot项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1%E3%80%81-SpringBootApplication"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1、**@SpringBootApplication**</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E3%80%81application%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">2.3、application配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E3%80%81%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">2.4、多环境配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E7%9A%84%E5%86%85%E5%AE%B9%E8%AF%BB%E5%8F%96"><span class="toc-number">2.5.</span> <span class="toc-text">2.5、自定义配置文件 的内容读取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1%E3%80%81%E7%94%A8java%E5%AF%B9%E8%B1%A1%E6%9D%A5%E5%8F%96%E5%80%BC"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1、用java对象来取值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2%E3%80%81%E4%BD%BF%E7%94%A8Environment%E5%AF%B9%E8%B1%A1%E5%B0%81%E8%A3%85%E5%85%A8%E9%83%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2、使用Environment对象封装全部的配置信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.6.</span> <span class="toc-text">2.6、配置文件的加载顺序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81SpringBoot%E6%95%B4%E5%90%88Junit"><span class="toc-number">3.</span> <span class="toc-text">三、SpringBoot整合Junit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SpringBoot%E6%95%B4%E5%90%88Mybatis"><span class="toc-number">4.</span> <span class="toc-text">四、SpringBoot整合Mybatis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81SpringBoot%E6%95%B4%E5%90%88Mybatis-Plus"><span class="toc-number">5.</span> <span class="toc-text">五、SpringBoot整合Mybatis-Plus</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81SpringBoot%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">6.</span> <span class="toc-text">六、SpringBoot整合Druid数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">6.1.</span> <span class="toc-text">6.1、导入依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E3%80%81%E5%86%99%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6yml"><span class="toc-number">6.2.</span> <span class="toc-text">6.2、写配置文件yml</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81SpringBoot%E6%95%B4%E5%90%88SSMP"><span class="toc-number">7.</span> <span class="toc-text">七、SpringBoot整合SSMP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1%E3%80%81%E5%88%9B%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE"><span class="toc-number">7.1.</span> <span class="toc-text">7.1、创建springboot项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%B1%82"><span class="toc-number">7.2.</span> <span class="toc-text">7.2、创建一个实体类层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3%E3%80%81%E5%88%9B%E5%BB%BAmapper%E5%B1%82"><span class="toc-number">7.3.</span> <span class="toc-text">7.3、创建mapper层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4%E3%80%81%E5%BC%80%E5%90%AFmybatisplus%E6%97%A5%E5%BF%97"><span class="toc-number">7.4.</span> <span class="toc-text">7.4、开启mybatisplus日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5%E3%80%81MyBatis-plus%E5%BC%80%E5%90%AF%E5%88%86%E9%A1%B5"><span class="toc-number">7.5.</span> <span class="toc-text">7.5、MyBatis-plus开启分页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6%E3%80%81%E6%8C%89%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.6.</span> <span class="toc-text">7.6、按条件查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7%E3%80%81service%E5%B1%82"><span class="toc-number">7.7.</span> <span class="toc-text">7.7、service层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-8%E3%80%81controller%E5%B1%82"><span class="toc-number">7.8.</span> <span class="toc-text">7.8、controller层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-9%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E7%9A%84%E4%BC%98%E5%8C%96"><span class="toc-number">7.9.</span> <span class="toc-text">7.9、前后端数据一致的优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-10%E3%80%81%E5%89%8D%E7%AB%AF%E5%8F%91%E9%80%81%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE"><span class="toc-number">7.10.</span> <span class="toc-text">7.10、前端发送异步请求访问数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-1%E3%80%81%E5%8D%95%E4%BD%93%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%A1%B5%E9%9D%A2%E6%94%BE%E7%BD%AE%E5%9C%A8resources%E4%B8%8B%E7%9A%84static%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">7.10.1.</span> <span class="toc-text">7.10.1、单体项目中页面放置在resources下的static目录下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-2%E3%80%81%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E9%87%8C%E8%B0%83%E7%94%A8getAll"><span class="toc-number">7.10.2.</span> <span class="toc-text">7.10.2、钩子函数里调用getAll()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-10-3%E3%80%81%E5%89%8D%E7%AB%AF-%E7%9A%84%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-number">7.11.</span> <span class="toc-text">7.10.3、前端 的添加操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-10-3%E3%80%81%E5%89%8D%E7%AB%AF-%E7%9A%84%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">7.12.</span> <span class="toc-text">7.10.3、前端 的删除操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-4%E3%80%81%E5%89%8D%E7%AB%AF-%E7%9A%84%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">7.12.1.</span> <span class="toc-text">7.10.4、前端 的修改操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-5%E3%80%81%E5%BC%82%E5%B8%B8%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">7.12.2.</span> <span class="toc-text">7.10.5、异常的处理方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-6%E3%80%81%E5%88%86%E9%A1%B5%E6%93%8D%E4%BD%9C"><span class="toc-number">7.12.3.</span> <span class="toc-text">7.10.6、分页操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-7%E3%80%81%E5%88%87%E6%8D%A2%E9%A1%B5%E7%A0%81"><span class="toc-number">7.12.4.</span> <span class="toc-text">7.10.7、切换页码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-8%E3%80%81%E5%B8%A6%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.12.5.</span> <span class="toc-text">7.10.8、带条件查询</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">DaiHaojun</div><div class="author-info__description text-center">记录学习日常</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">25</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">36</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">myblog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">SpringBoot</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-04-20</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="一、SpringBoot"><a href="#一、SpringBoot" class="headerlink" title="一、SpringBoot"></a>一、SpringBoot</h1><h2 id="1-1、SpringBoot的优点"><a href="#1-1、SpringBoot的优点" class="headerlink" title="1.1、SpringBoot的优点"></a>1.1、SpringBoot的优点</h2><ul>
<li>少写配置文件</li>
<li>SpringBoot相当于是一个不需要配置文件的的spring+springmvc常用的框架和第三方的库已经配置好了</li>
<li>开发效率高，使用方便</li>
</ul>
<h2 id="1-2、JavaConfig"><a href="#1-2、JavaConfig" class="headerlink" title="1.2、JavaConfig"></a>1.2、JavaConfig</h2><p>JavaConfig:是 Spring提供的使用java类配置容器。配置Spring IOC容器的纯Java方法。</p>
<p><strong>优点:</strong><br>1.可以使用面像对象的方式，一个配置类可以继承配置类，可以重写方法</p>
<p>这个java类可以创建对象，把对象放进spring容器中</p>
<p>2.避免繁琐的xml配置</p>
<p>3.使用两个注解</p>
<ul>
<li>@Configuration：放在一个类的上面，表示这个类作为配置文件使用</li>
<li>@Bean：声明对象，放入容器</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 表示当前类是作为当前类使用的</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 位置在类的上面</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 相当于applicationContext.xml</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建方法，方法的返回值是对象，在方法的上面加上<span class="doctag">@bean</span></span></span><br><span class="line"><span class="comment">     * 方法的返回值对象就注入到容器中去</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">createStudent</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;dhj&quot;</span>,<span class="string">&quot;男&quot;</span>,<span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用javaconfig</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">createStudent</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;createStudent&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;使用javaconfig的方式创建容器对象&quot;</span>+createStudent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>不指定名字就是方法名字，如果要指定的话可以在@bean中加上name属性，如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean(name = &quot;dhj&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Student <span class="title function_">createStudent</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;dhj&quot;</span>,<span class="string">&quot;男&quot;</span>,<span class="number">18</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3、-ImportResource"><a href="#1-3、-ImportResource" class="headerlink" title="1.3、@ImportResource"></a>1.3、@ImportResource</h2><p><strong><code>@ImportResource</code></strong>:</p>
<p>作用是导入其他的 xml文件 放在类的上面</p>
<h2 id="1-4、-PropertyResource"><a href="#1-4、-PropertyResource" class="headerlink" title="1.4、@PropertyResource"></a>1.4、@PropertyResource</h2><p><strong><code>@PropertyResource</code></strong></p>
<p>表示是读取properties的属性配置文件配合**<code>@Value</code>**</p>
<p>1、在resources下创建properties文件，使用key&#x3D;value 格式提供数据</p>
<p>2、在@PropertyResource指定文件的路径</p>
<p>3、在java程序中用**@value**(${…})来取值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;tiger&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tiger</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;tiger.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;tiger.age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Tiger&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tiger</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tiger</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">tiger.name=动物园大老虎</span></span><br><span class="line"><span class="string">tiger.age=5</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource(value= &quot;classpath:config.yml&quot;,encoding = &quot;utf-8&quot;)</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.dhj.pojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    <span class="type">Tiger</span> <span class="variable">tiger</span> <span class="operator">=</span> (Tiger) context.getBean(<span class="string">&quot;tiger&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;使用javaconfig的方式创建容器对象&quot;</span> + tiger);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="二、SpringBoot入门"><a href="#二、SpringBoot入门" class="headerlink" title="二、SpringBoot入门"></a>二、SpringBoot入门</h1><h2 id="2-1、创建SpringBoot项目"><a href="#2-1、创建SpringBoot项目" class="headerlink" title="2.1、创建SpringBoot项目"></a>2.1、创建SpringBoot项目</h2><ul>
<li>创建独立的 Spring 应用程序</li>
<li>直接嵌入 Tomcat、Jetty 或 Undertow（无需部署 WAR 文件）</li>
<li>提供自以为是的“入门”依赖项以简化您的构建配置</li>
<li>尽可能自动配置 Spring 和 第三方库</li>
<li>提供生产就绪功能，例如指标、健康检查和外部化配置</li>
<li>完全无需代码生成，无需 XML 配置</li>
</ul>
<h3 id="2-1-1、第一种方式"><a href="#2-1-1、第一种方式" class="headerlink" title="2.1.1、第一种方式"></a>2.1.1、第一种方式</h3><p>使用Spring提供的初始化器，就是向导提供springboot应用</p>
<h3 id="2-1-2、第二种方式"><a href="#2-1-2、第二种方式" class="headerlink" title="2.1.2、第二种方式"></a>2.1.2、第二种方式</h3><p><a target="_blank" rel="noopener" href="http://start.springboot.io/">http://start.springboot.io</a></p>
<p><img src="/2022/04/21/SpringBoot/image-20220419132709853.png" alt="image-20220419132709853"></p>
<h2 id="2-2、直接运行SpringBoot项目"><a href="#2-2、直接运行SpringBoot项目" class="headerlink" title="2.2、直接运行SpringBoot项目"></a>2.2、直接运行SpringBoot项目</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220419133845838.png" alt="image-20220419133845838"></p>
<p>controller</p>
<p>@<strong>RestController</strong>：相当于@ResponseBody和@Controller两个注解</p>
<p>但是他是用于类上的不能用于方法上</p>
<p>@ResponseBody可以用在方法上</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello Springboot！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220419133940201.png" alt="image-20220419133940201"></p>
<h3 id="2-2-1、-SpringBootApplication"><a href="#2-2-1、-SpringBootApplication" class="headerlink" title="2.2.1、**@SpringBootApplication**"></a>2.2.1、**<code>@SpringBootApplication</code>**</h3><p><strong><code>@SpringBootApplication</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">复合注解</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line">    <span class="comment">//作为配置文件来使用可以使用@Bean来注入到容器中去</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line">    <span class="comment">//启用自动配置，把java对象配置好，注入到spring容器中</span></span><br><span class="line">    <span class="comment">//例如可以把mybatis对象创建好，放到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line">    <span class="comment">//通过它能找到注解，扫描器根据注解的功能来创建对象，组件扫描器扫描的是包名</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3、application配置文件"><a href="#2-3、application配置文件" class="headerlink" title="2.3、application配置文件"></a>2.3、application配置文件</h2><p>有三种格式</p>
<ul>
<li>xxx.properties(key&#x3D;value)</li>
<li>xxx.yml(k:v)</li>
<li>xxx.ymal</li>
</ul>
<p>关系</p>
<p>xxx.properties&gt;xxx.yml&gt;xxx.ymal</p>
<p><img src="/2022/04/21/SpringBoot/image-20220419140102848.png" alt="image-20220419140102848"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220419140128467.png" alt="image-20220419140128467"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220419140151433.png" alt="image-20220419140151433"></p>
<p>yml格式：</p>
<p><img src="/2022/04/21/SpringBoot/image-20220419140601356.png" alt="image-20220419140601356"></p>
<p>单一数据：</p>
<p> 直接</p>
<h2 id="2-4、多环境配置"><a href="#2-4、多环境配置" class="headerlink" title="2.4、多环境配置"></a>2.4、多环境配置</h2><p>每个环境有不同的配置信息，</p>
<p>为了方便可以使用多环境配置</p>
<p>使用方式：</p>
<p>创建多个配置文件的名称遵守规则  **application-**xxx.yml</p>
<p>application-xxx.properties(yml)</p>
<p>application-prod.properties</p>
<p>application-test.properties</p>
<p><img src="/2022/04/21/SpringBoot/image-20220419143746285.png" alt="image-20220419143746285"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220419143756653.png" alt="image-20220419143756653"></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#激活哪个文件</span></span><br><span class="line"><span class="string">spring.profiles.active=dev</span></span><br></pre></td></tr></table></figure>

<p>等号右边是你杠后面的内容</p>
<h2 id="2-5、自定义配置文件-的内容读取"><a href="#2-5、自定义配置文件-的内容读取" class="headerlink" title="2.5、自定义配置文件 的内容读取"></a>2.5、自定义配置文件 的内容读取</h2><p>在yml中可以用${}的方式来取值</p>
<p>使用双引号包括 的字符串，转义字符可以生效</p>
<p>用**<code>@Value</code>**</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">book.name</span>=<span class="string">雾都孤儿</span></span><br><span class="line"><span class="attr">book.author</span>=<span class="string">查尔斯狄更斯</span></span><br><span class="line"><span class="attr">book.published</span>=<span class="string">1838</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#对象的形式通过对象点属性来取值</span></span><br><span class="line"><span class="attr">user1:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">daihaojun</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line"><span class="attr">user2:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gkc</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">19</span></span><br><span class="line"><span class="comment">#数组的方式，通过索引来取值</span></span><br><span class="line"><span class="attr">country:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hubei</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">shanghai</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wuhan</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">xingjiang</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#对象数组形式</span></span><br><span class="line"><span class="attr">users:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dcx</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mzw</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>



<p>controller内容</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.author&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bookAuthor;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.published&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String published;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;country[1]&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String country1;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;users[1].age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String age1;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello Springboot！&quot;</span> +bookName+bookAuthor+published;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220419144341083.png" alt="image-20220419144341083"></p>
<h3 id="2-5-1、用java对象来取值"><a href="#2-5-1、用java对象来取值" class="headerlink" title="2.5.1、用java对象来取值"></a>2.5.1、用java对象来取值</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/book&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">book</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>+book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, author=&#x27;&quot;</span> + author + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, published=&#x27;&quot;</span> + published + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	 </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.author&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;book.published&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String published;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-2、使用Environment对象封装全部的配置信息"><a href="#2-5-2、使用Environment对象封装全部的配置信息" class="headerlink" title="2.5.2、使用Environment对象封装全部的配置信息"></a>2.5.2、使用Environment对象封装全部的配置信息</h3><p><strong>前提是你这个配置信息必须是spring管控的范围</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> Environment environment;</span><br></pre></td></tr></table></figure>

<p>然后通过environment.getproperty(“key”)获取到</p>
<p><img src="/2022/04/21/SpringBoot/image-20220423220604396.png" alt="image-20220423220604396"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220423220632059.png" alt="image-20220423220632059"></p>
<p>例如：创建一个类封装jdbc四个属性url driver uesrname password</p>
<p>分析：</p>
<p>1、这是由spring帮助我们去加载到对象中，一点要告诉spring容器加载这组信息</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">driver:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure>

<p>2、创建一个类来封装这组数据</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix =&quot;datasource&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDataSource</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    some setter and getter and tostring....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、把他定义为一个bean让spring管理**@component**</p>
<p>4、告诉spring我要封装那个数据**@ConfigurationProperties(“datasource”)**括号里的是前缀</p>
<p><img src="/2022/04/21/SpringBoot/image-20220423222251205.png" alt="image-20220423222251205"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220423222345611.png" alt="image-20220423222345611"></p>
<h2 id="2-6、配置文件的加载顺序"><a href="#2-6、配置文件的加载顺序" class="headerlink" title="2.6、配置文件的加载顺序"></a>2.6、配置文件的加载顺序</h2><p>加载顺序为下文的排列顺序，高优先级配置的属性会生效</p>
<ul>
<li>file:&#x2F;config&#x2F;:当前项目下的&#x2F;config目录下</li>
<li>file:..&#x2F;            ：当前项目的根目录</li>
<li>classpath：&#x2F;config&#x2F;：classpath的&#x2F;config目录</li>
<li>classpath：&#x2F; classpath的根目录</li>
</ul>
<p>注意:</p>
<p>1、高级配置文件只覆盖低级配置文件的重复项。低级配置文件的独有项任然有效。</p>
<h1 id="三、SpringBoot整合Junit"><a href="#三、SpringBoot整合Junit" class="headerlink" title="三、SpringBoot整合Junit"></a>三、SpringBoot整合Junit</h1><p><strong>@SpringBootTest</strong></p>
<ul>
<li>导入测试的starter</li>
<li>测试类使用**@SpringBootTest**修饰</li>
<li>使用自动装配的形式添加要测试的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用了add方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(classes = Application.class)</span></span><br><span class="line"><span class="comment">//这是springboot的测试类，就有了容器了</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line">    </span><br><span class="line">     <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220419222058396.png" alt="image-20220419222058396"></p>
<h1 id="四、SpringBoot整合Mybatis"><a href="#四、SpringBoot整合Mybatis" class="headerlink" title="四、SpringBoot整合Mybatis"></a>四、SpringBoot整合Mybatis</h1><ul>
<li>引入依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>主配置类：</p>
<p><strong>注意：主配置类上要加上<code>@MapperScanner</code>注解来告诉spring容器扫描那个包</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dhj;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.dhj.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      SpringApplication.run(Application.class, args);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>配置文件application.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis-study?useSSL=false&amp;charsetEncoding=utf-8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>创建一个mapper包和bean包将实体类写好</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userPassword;</span><br><span class="line">    <span class="keyword">private</span> String realName;</span><br><span class="line">    <span class="keyword">private</span> String userImg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserMapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//启动的时候容器中就有了mapper</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from `user`&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id = &quot;UserMap&quot;, value = &#123;</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;id&quot;, property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;user_name&quot;, property = &quot;userName&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;user_password&quot;, property = &quot;userPassword&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;real_name&quot;, property = &quot;realName&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;user_img&quot;, property = &quot;userImg&quot;),</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Result：<img src="/2022/04/21/SpringBoot/image-20220419231158379.png" alt="image-20220419231158379"></p>
<p>扫描项目中的Dao层，将dao接口类注入到Spring，能够让其他类进行引用；</p>
<ul>
<li><p><code>@Mapper</code>：在dao接口类中，添加此注解；麻烦的在于，每个dao接口类都必须添加此注解；</p>
<p>作用：在接口类上添加了@Mapper，在编译之后会生成相应的接口实现类</p>
</li>
<li><p><code>@MapperScan</code>：可以指定要扫描的dao接口类的路径，可以在启动类中添加此注解，可替代@Mapper注解（此模块内dao接口类不用都添加@Mapper注解）</p>
</li>
</ul>
<p>如果使用xml配置文件的方法来配置的话</p>
<p>就要在我们的application.yml下配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mapper/*</span></span><br></pre></td></tr></table></figure>

<h1 id="五、SpringBoot整合Mybatis-Plus"><a href="#五、SpringBoot整合Mybatis-Plus" class="headerlink" title="五、SpringBoot整合Mybatis-Plus"></a>五、SpringBoot整合Mybatis-Plus</h1><ul>
<li>首先创建springboot项目 可以通过aliyun来创建，因为阿里云有mybatis的依赖</li>
</ul>
<p>​	<a target="_blank" rel="noopener" href="https://start.aliyun.com/">https://start.aliyun.com/</a></p>
<p><img src="/2022/04/21/SpringBoot/image-20220424004728889.png" alt="image-20220424004728889"></p>
<p>其他的都一样唯一的就是写yml文件的时候要注意通过阿里云创建的要加上时区TimeZone</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot-study?useSSL=false&amp;chasetEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span></span><br></pre></td></tr></table></figure>

<p>表名的前缀也要加上</p>
<p>然后写dao层的时候就可以简化开发了 继承就行这个BaseMapper里有很多已经写好的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@MapperScan</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Book&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220424005040281.png" alt="image-20220424005040281"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dhj;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dhj.dao.BookDao;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ApplicationTests1</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao dao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(dao.selectById(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220424005130892.png" alt="image-20220424005130892"></p>
<h1 id="六、SpringBoot整合Druid数据库连接池"><a href="#六、SpringBoot整合Druid数据库连接池" class="headerlink" title="六、SpringBoot整合Druid数据库连接池"></a>六、SpringBoot整合Druid数据库连接池</h1><h2 id="6-1、导入依赖"><a href="#6-1、导入依赖" class="headerlink" title="6.1、导入依赖"></a>6.1、导入依赖</h2><p><img src="/2022/04/21/SpringBoot/image-20220424123534500.png" alt="image-20220424123534500"></p>
<p>还需要一个druid的启动配置</p>
<p><img src="/2022/04/21/SpringBoot/image-20220424123624013.png" alt="image-20220424123624013"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-2、写配置文件yml"><a href="#6-2、写配置文件yml" class="headerlink" title="6.2、写配置文件yml"></a>6.2、写配置文件yml</h2><p><strong><img src="/2022/04/21/SpringBoot/image-20220424124038497.png" alt="image-20220424124038497"></strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot-study?useSSL=false&amp;chasetEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span></span><br></pre></td></tr></table></figure>

<p>也可以这样写配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot-study?useSSL=false&amp;chasetEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220424124721356.png" alt="image-20220424124721356"></p>
<h1 id="七、SpringBoot整合SSMP"><a href="#七、SpringBoot整合SSMP" class="headerlink" title="七、SpringBoot整合SSMP"></a>七、SpringBoot整合SSMP</h1><h2 id="7-1、创建springboot项目"><a href="#7-1、创建springboot项目" class="headerlink" title="7.1、创建springboot项目"></a>7.1、创建springboot项目</h2><p><img src="/2022/04/21/SpringBoot/image-20220424130347044.png" alt="image-20220424130347044"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220424130425365.png" alt="image-20220424130425365"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220424130444676.png" alt="image-20220424130444676"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220424130509464.png" alt="image-20220424130509464"></p>
<p>然后finish</p>
<p>再到pom.xml中加上 druid的启动配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后将端口设置为80比较简单</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot-study?useSSL=false&amp;chasetEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure>

<h2 id="7-2、创建一个实体类层"><a href="#7-2、创建一个实体类层" class="headerlink" title="7.2、创建一个实体类层"></a>7.2、创建一个实体类层</h2><p><img src="/2022/04/21/SpringBoot/image-20220424131418938.png" alt="image-20220424131418938"></p>
<p>创建这张表的实体类</p>
<p>domain：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  Integer id ;</span><br><span class="line">    <span class="keyword">private</span>  String  bType;</span><br><span class="line">    <span class="keyword">private</span>  String  bName;</span><br><span class="line">    <span class="keyword">private</span>  String  bDesc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>配置yml：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot-ssmp?useSSL=false&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span></span><br></pre></td></tr></table></figure>

<p>建库建表然后给测试数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database springboot<span class="operator">-</span>ssmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_book` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `b_type` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `b_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `b_desc` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `springboot<span class="operator">-</span>ssmp`.`tb_book`(`id`, `b_type`, `b_name`, `b_desc`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;学习&#x27;</span>, <span class="string">&#x27;java基础编程&#x27;</span>, <span class="string">&#x27;java基础的教学书本&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `springboot<span class="operator">-</span>ssmp`.`tb_book`(`id`, `b_type`, `b_name`, `b_desc`) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;小说&#x27;</span>, <span class="string">&#x27;雾都孤儿&#x27;</span>, <span class="string">&#x27;该作以雾都伦敦为背景，讲述了一个孤儿悲惨的身世及遭遇。主人公奥利弗在孤儿院长大，经历学徒生涯，艰苦逃难，误入贼窝，又被迫与狠毒的凶徒为伍，历尽无数辛酸，最后在善良人的帮助下，查明身世并获得了幸福。该书揭露许多当时的社会问题，如救济院、童工、以及帮派吸收青少年参与犯罪等。该书曾多次改编为电影、电视及舞台剧。&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `springboot<span class="operator">-</span>ssmp`.`tb_book`(`id`, `b_type`, `b_name`, `b_desc`) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;故事&#x27;</span>, <span class="string">&#x27;小狐狸讲故事&#x27;</span>, <span class="string">&#x27;可以帮助孩子晚上入睡的睡前小故事&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `springboot<span class="operator">-</span>ssmp`.`tb_book`(`id`, `b_type`, `b_name`, `b_desc`) <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;童话&#x27;</span>, <span class="string">&#x27;小红帽&#x27;</span>, <span class="string">&#x27;经典童话故事&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `springboot<span class="operator">-</span>ssmp`.`tb_book`(`id`, `b_type`, `b_name`, `b_desc`) <span class="keyword">VALUES</span> (<span class="number">5</span>, <span class="string">&#x27;学习&#x27;</span>, <span class="string">&#x27;python入门&#x27;</span>, <span class="string">&#x27;python编程入门教学&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="7-3、创建mapper层"><a href="#7-3、创建mapper层" class="headerlink" title="7.3、创建mapper层"></a>7.3、创建mapper层</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line">@<span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Book&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookMapper.selectById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2022/04/21/SpringBoot/image-20220424133735343.png" alt="image-20220424133735343"></p>
<p>数据库连接成功</p>
<p>设置id自增策略：</p>
<p>auto是自动增加，数据库里的增加策略</p>
<p><img src="/2022/04/21/SpringBoot/image-20220424135401479.png" alt="image-20220424135401479"></p>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询单个根据id查</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectByid</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookMapper.selectById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Book&gt; books = bookMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (Book n:books) &#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试查询insert 保存的功能</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        bookMapper.insert(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">0</span>,<span class="string">&quot;知识&quot;</span>,<span class="string">&quot;当幸福来敲门&quot;</span>,<span class="string">&quot;励志故事&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDeleteByid</span><span class="params">()</span>&#123;</span><br><span class="line">        bookMapper.deleteById(<span class="number">7</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改的测试</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        bookMapper.updateById(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">8</span>,<span class="string">&quot;测试&quot;</span>,<span class="string">&quot;当幸福没来敲门&quot;</span>,<span class="string">&quot;测试数据&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-4、开启mybatisplus日志"><a href="#7-4、开启mybatisplus日志" class="headerlink" title="7.4、开启mybatisplus日志"></a>7.4、开启mybatisplus日志</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220424140117307.png" alt="image-20220424140117307"></p>
<h2 id="7-5、MyBatis-plus开启分页"><a href="#7-5、MyBatis-plus开启分页" class="headerlink" title="7.5、MyBatis-plus开启分页"></a>7.5、MyBatis-plus开启分页</h2><p>第一步：</p>
<p>创建一个mp的配置类 ，里面写拦截器的配置，并且交给spring管理</p>
<p><img src="/2022/04/21/SpringBoot/image-20220424141655252.png" alt="image-20220424141655252"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MpConfig</span> &#123;</span><br><span class="line">    <span class="comment">//交给spring管理了一件拦截器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试分页</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    bookMapper.selectPage(page,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ipage里有：</p>
<ul>
<li>数据</li>
<li>当前页码值</li>
<li>每页的数据总量</li>
<li>最大的页码数</li>
<li>数据总量</li>
</ul>
<p><img src="/2022/04/21/SpringBoot/image-20220424142455225.png" alt="image-20220424142455225"></p>
<p><img src="/2022/04/21/SpringBoot/image-20220424141939298.png" alt="image-20220424141939298"></p>
<h2 id="7-6、按条件查询"><a href="#7-6、按条件查询" class="headerlink" title="7.6、按条件查询"></a>7.6、按条件查询</h2><p>1、基本</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按条件查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectBy</span><span class="params">()</span>&#123;</span><br><span class="line">    QueryWrapper&lt;Book&gt; qw  = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Book&gt;();</span><br><span class="line">    qw.like(<span class="string">&quot;b_name&quot;</span>,<span class="string">&quot;门&quot;</span>);</span><br><span class="line">    bookMapper.selectList(qw);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/SpringBoot/image-20220424143214422.png" alt="image-20220424143214422"></p>
<p>2、也可以这样</p>
<p><img src="/2022/04/21/SpringBoot/image-20220424143455949.png" alt="image-20220424143455949"></p>
<p><strong><code>lqw.like(name!=null,Book::getBName,name);</code></strong></p>
<p>这个的意思是你的name不为空我才连接条件</p>
<p>为空我不连接</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按条件查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectBy2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;编程&quot;</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    lqw.like(name!=<span class="literal">null</span>,Book::getBName,name);</span><br><span class="line">    bookMapper.selectList(lqw);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/2022/04/21/SpringBoot/image-20220424143602007.png" alt="image-20220424143602007"></p>
<h2 id="7-7、service层"><a href="#7-7、service层" class="headerlink" title="7.7、service层"></a>7.7、service层</h2><p>用mybatisplus实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;BookMapper, Book&gt; <span class="keyword">implements</span> <span class="title class_">IBookService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBookService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Book&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两句就行</p>
<p>快速开发方案</p>
<ul>
<li><p>使用MyBatisPlus提供有业务层通用接口（ISerivce<T>)与业务层通用实现类（ServiceImpl&lt;M,T&gt; )</T></p>
</li>
<li><p>在通用类基础上做功能重载或功能追加</p>
</li>
<li><p>注意重载时不要覆盖原始操作，避免原始提供的功能丢失</p>
</li>
</ul>
<h2 id="7-8、controller层"><a href="#7-8、controller层" class="headerlink" title="7.8、controller层"></a>7.8、controller层</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IBookService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> service.list();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  service.save(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> service.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteByid</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> service.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> service.updateById(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&#123;curr&#125;/&#123;pagesize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> curr,<span class="meta">@PathVariable</span> <span class="type">int</span> pagesize)</span>&#123;</span><br><span class="line">        <span class="type">IPage</span> <span class="variable">ipage</span> <span class="operator">=</span> service.getIpage(curr, pagesize);</span><br><span class="line">        <span class="keyword">return</span> ipage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="7-9、前后端数据一致的优化"><a href="#7-9、前后端数据一致的优化" class="headerlink" title="7.9、前后端数据一致的优化"></a>7.9、前后端数据一致的优化</h2><p>定义一个基本类R用于封装数据</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">R</span><span class="params">(Boolean flag)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.flag=flag;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">R</span><span class="params">(<span class="type">boolean</span> flag,Object data)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.flag=flag;</span><br><span class="line">        <span class="built_in">this</span>.data=data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IBookService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, service.list());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(service.save(book));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, service.getById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">deleteByid</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(service.removeById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(service.updateById(book));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&#123;curr&#125;/&#123;pagesize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> curr, <span class="meta">@PathVariable</span> <span class="type">int</span> pagesize)</span> &#123;</span><br><span class="line">        <span class="type">IPage</span> <span class="variable">ipage</span> <span class="operator">=</span> service.getIpage(curr, pagesize);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, ipage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后将controller层的返回值全部变成这个</p>
<p>然后进行测试…</p>
<h2 id="7-10、前端发送异步请求访问数据"><a href="#7-10、前端发送异步请求访问数据" class="headerlink" title="7.10、前端发送异步请求访问数据"></a>7.10、前端发送异步请求访问数据</h2><h3 id="7-10-1、单体项目中页面放置在resources下的static目录下"><a href="#7-10-1、单体项目中页面放置在resources下的static目录下" class="headerlink" title="7.10.1、单体项目中页面放置在resources下的static目录下"></a>7.10.1、单体项目中页面放置在resources下的static目录下</h3><p><img src="/2022/04/21/SpringBoot/image-20220424233650367.png" alt="image-20220424233650367"></p>
<h3 id="7-10-2、钩子函数里调用getAll"><a href="#7-10-2、钩子函数里调用getAll" class="headerlink" title="7.10.2、钩子函数里调用getAll()"></a>7.10.2、钩子函数里调用getAll()</h3><p>来显示页面的所有数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  <span class="comment">//钩子函数，VUE对象初始化完成后自动执行</span></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;,	</span><br><span class="line"><span class="comment">//列表</span></span><br><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;run...&quot;</span>)</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p><strong>ok后。注意el-table 里 的属性prop 这个是你json数据的键这样他才能回填数据绑定数据 一定要一一对应</strong> </p>
<p><img src="/2022/04/21/SpringBoot/image-20220425001316047.png" alt="image-20220425001316047"></p>
<h2 id="7-10-3、前端-的添加操作"><a href="#7-10-3、前端-的添加操作" class="headerlink" title="7.10.3、前端 的添加操作"></a>7.10.3、前端 的添加操作</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//添加</span></span><br><span class="line"><span class="title function_">handleAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">&#x27;/books&#x27;</span>, <span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">flag</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;添加成功！&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;添加失败，请重新尝试！&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="7-10-3、前端-的删除操作"><a href="#7-10-3、前端-的删除操作" class="headerlink" title="7.10.3、前端 的删除操作"></a>7.10.3、前端 的删除操作</h2><p>其中row是里面的一行记录里面有type，name，desc ，和id</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除</span></span><br><span class="line">         <span class="title function_">handleDelete</span>(<span class="params">row</span>) &#123;</span><br><span class="line">             <span class="variable language_">this</span>.$confirm(<span class="string">&quot;永久删除，你确定吗？&quot;</span>, <span class="string">&quot;提示：&quot;</span>, &#123;<span class="attr">type</span>: <span class="string">&quot;info&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">                 axios.<span class="title function_">delete</span>(<span class="string">&quot;/books/&quot;</span> + row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                     <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">flag</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">                         <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;删除成功！&quot;</span>)</span><br><span class="line">                     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                         <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;删除失败，请重新尝试！&quot;</span>)</span><br><span class="line">                     &#125;</span><br><span class="line">                 &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                     <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;取消操作&quot;</span>)</span><br><span class="line">                 &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                     <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">                 &#125;)</span><br><span class="line">             &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="7-10-4、前端-的修改操作"><a href="#7-10-4、前端-的修改操作" class="headerlink" title="7.10.4、前端 的修改操作"></a>7.10.4、前端 的修改操作</h3><p>修改的意思就是弹出的操作框，数据回填	</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//弹出编辑窗口</span></span><br><span class="line"><span class="title function_">handleUpdate</span>(<span class="params">row</span>) &#123;</span><br><span class="line"></span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>&amp;res.<span class="property">data</span>.<span class="property">data</span>!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span>=<span class="literal">true</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">formData</span>=res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;数据同步失败，自动刷新&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>





<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//修改</span></span><br><span class="line"><span class="title function_">handleEdit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    axios.<span class="title function_">put</span>(<span class="string">&#x27;/books&#x27;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">flag</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">false</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;修改成功！&quot;</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;修改失败，请重新尝试！&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="7-10-5、异常的处理方式"><a href="#7-10-5、异常的处理方式" class="headerlink" title="7.10.5、异常的处理方式"></a>7.10.5、异常的处理方式</h3><ul>
<li><p>自定义一个自己的异常处理类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="comment">//@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">doException</span><span class="params">(Exception e )</span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;出异常了！！&quot;</span>);</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">R</span>(<span class="string">&quot;服务器内部错误，请联系工作人员！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>R里面加一个构造方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">R</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-10-6、分页操作"><a href="#7-10-6、分页操作" class="headerlink" title="7.10.6、分页操作"></a>7.10.6、分页操作</h3><p>就是将getAll的时候带回来的数据少一点</p>
<p>我们在controller中写的 分页操作为</p>
<p><img src="/2022/04/21/SpringBoot/image-20220426114331899.png" alt="image-20220426114331899"></p>
<p>路径是你要的当前页码和每页显示的数量</p>
<p>所以在前端发的请求为：</p>
<p><img src="/2022/04/21/SpringBoot/image-20220426114504368.png" alt="image-20220426114504368"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;run...&quot;</span>)</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">&quot;/&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">current</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">total</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//每页加载的数据量</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">size</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">records</span>;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="7-10-7、切换页码"><a href="#7-10-7、切换页码" class="headerlink" title="7.10.7、切换页码"></a>7.10.7、切换页码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//切换页码</span></span><br><span class="line"><span class="title function_">handleCurrentChange</span>(<span class="params">currentPage</span>) &#123;</span><br><span class="line">    <span class="comment">//修改页码之为当前选中的页码值</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>=currentPage;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="7-10-8、带条件查询"><a href="#7-10-8、带条件查询" class="headerlink" title="7.10.8、带条件查询"></a>7.10.8、带条件查询</h3><p><img src="/2022/04/21/SpringBoot/image-20220426114643336.png" alt="image-20220426114643336"></p>
<p>在这里面加上三个参数，用来接收你得条件</p>
<p><img src="/2022/04/21/SpringBoot/image-20220426114738243.png" alt="image-20220426114738243"></p>
<p>同时在这里用v-model绑定你的参数</p>
<p>然后在getAll中获取三个参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//组织参数</span></span><br><span class="line">    param=<span class="string">&quot;?query&quot;</span></span><br><span class="line">    param+=<span class="string">&quot;&amp;bType=&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">bType</span>;</span><br><span class="line">    param+=<span class="string">&quot;&amp;bName=&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">bName</span>;</span><br><span class="line">    param+=<span class="string">&quot;&amp;bDesc=&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">bDesc</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(param)</span><br><span class="line">    <span class="comment">//拼接参数</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;run...&quot;</span>)</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">&quot;/&quot;</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>+param).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">current</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">total</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//每页加载的数据量</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>=res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">size</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">records</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>同时后端需要接收这三个参数来查询：</p>
<p>直接用对象的形式来接收三个参数，</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;&#123;curr&#125;/&#123;pagesize&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> curr, <span class="meta">@PathVariable</span> <span class="type">int</span> pagesize, Book book)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;book1===&gt;&quot;</span>+book);</span><br><span class="line"></span><br><span class="line">    <span class="type">IPage</span> <span class="variable">ipage</span> <span class="operator">=</span> service.getIpage(curr, pagesize, book1);</span><br><span class="line">    <span class="comment">//如果当前页码值大于你的总页码值，就再次执行一遍查询，但是用你的最大页码值来查或者直接跳回第一页，这里选择了跳到最后一页</span></span><br><span class="line">    <span class="keyword">if</span>(curr&gt;ipage.getPages())&#123;</span><br><span class="line">        ipage = service.getIpage((<span class="type">int</span>) ipage.getPages(), pagesize,book1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, ipage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时在service接口中加上这个方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBookService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Book&gt; &#123;</span><br><span class="line">    IPage <span class="title function_">getIpage</span><span class="params">(<span class="type">int</span> Curr, <span class="type">int</span> pageSize, Book book)</span>;</span><br><span class="line"></span><br><span class="line">    IPage <span class="title function_">getIpage</span><span class="params">(<span class="type">int</span> Curr, <span class="type">int</span> pageSize)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再接口的实现类里进行实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> IPage <span class="title function_">getIpage</span><span class="params">(<span class="type">int</span> curr, <span class="type">int</span> pageSize, Book book)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;Book&gt;();</span><br><span class="line">    lqw.like(Strings.isNotEmpty(book.getBType()), Book::getBType, book.getBType());</span><br><span class="line">    lqw.like(Strings.isNotEmpty(book.getBName()), Book::getBName, book.getBName());</span><br><span class="line">    lqw.like(Strings.isNotEmpty(book.getBDesc()), Book::getBDesc, book.getBDesc());</span><br><span class="line"></span><br><span class="line">    <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(curr, pageSize);</span><br><span class="line">    mapper.selectPage(page, lqw);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">DaiHaojun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://daihaojun554.github.io/2022/04/21/SpringBoot/">http://daihaojun554.github.io/2022/04/21/SpringBoot/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/04/21/SpringMVC/"><i class="fa fa-chevron-left">  </i><span>SpringMVC</span></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By DaiHaojun</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://daihaojun.top">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://lib.baomitu.com/animejs/latest/anime.min.js"></script><script src="https://lib.baomitu.com/jquery/latest/jquery.min.js"></script><script src="https://lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script src="https://lib.baomitu.com/velocity/latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>