<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="HiveDemo"><meta name="keywords" content="Hive,数据可视化"><meta name="author" content="DaiHaojun"><meta name="copyright" content="DaiHaojun"><title>HiveDemo | myblog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="myblog" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hive%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%AA%91%E8%A1%8C%E6%A1%88%E4%BE%8B%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">Hive案例：骑行案例数据分析和可视化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%80%E5%A7%8B%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">一、开始：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%88%B0HDFS%E4%B8%8A%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">1.</span> <span class="toc-text">1.1、上传文件到HDFS上的根目录下</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E3%80%81%E5%BB%BA%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">1.2、建库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E3%80%81%E5%BB%BA%E8%A1%A8-%E8%BD%A6%E6%AC%A1%E6%95%B0%E6%8D%AE%E8%A1%A8-tb-trip-06"><span class="toc-number">3.</span> <span class="toc-text">1.3、建表:车次数据表 tb_trip_06</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E3%80%81%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">1.4、导入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E3%80%81%E5%88%86%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">1.5、分析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%AE%BE%E8%AE%A1hivesql%E8%AF%AD%E5%8F%A5"><span class="toc-number"></span> <span class="toc-text">二、设计hivesql语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E6%9F%A5%E8%AF%A2%E4%B8%80%E5%A4%A9%E6%AF%8F%E5%B0%8F%E6%97%B6%E7%9A%84%E9%AA%91%E8%A1%8C%E6%95%B0%E9%87%8F"><span class="toc-number">1.</span> <span class="toc-text">2.1、查询一天每小时的骑行数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E5%BB%BA%E7%AB%8B%E4%B8%80%E5%BC%A0%E8%A1%A8%E5%8F%AB%E5%81%9Atb-trip-day-hour-count%EF%BC%8C"><span class="toc-number">2.</span> <span class="toc-text">2.2、建立一张表叫做tb_trip_day_hour_count，</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1%E3%80%81%E5%B0%86%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E5%86%99%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">2.1.</span> <span class="toc-text">2.2.1、将查询出来的数据写到一个文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2%E3%80%81%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.</span> <span class="toc-text">2.2.2、导入数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%86%99java%E4%BB%A3%E7%A0%81"><span class="toc-number"></span> <span class="toc-text">三、写java代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E3%80%81pojo%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">3.1、pojo层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.</span> <span class="toc-text">3.2、数据库连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E3%80%81%E6%B5%8B%E8%AF%95%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.</span> <span class="toc-text">3.3、测试是否成功连接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4%E3%80%81Dao%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">3.4、Dao层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5%E3%80%81service%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">3.5、service层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6%E3%80%81Controller%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">3.6、Controller层</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%94%BBEcharts%E5%9B%BE"><span class="toc-number"></span> <span class="toc-text">四、画Echarts图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E3%80%81%E7%94%BB%E5%9B%BE%E4%B9%8B%E5%89%8D%E5%85%88%E8%A7%A3%E5%86%B3%E4%B8%80%E4%B8%8B%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">4.1、画图之前先解决一下控制台乱码问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E3%80%81%E5%85%88%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%80%E5%A4%A9%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9A%84%E6%95%B0%E6%8D%AE%E5%9B%BE%E5%83%8F"><span class="toc-number">2.</span> <span class="toc-text">4.2、先获取某一天的数据的数据图像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1%E3%80%81Dao"><span class="toc-number">2.1.</span> <span class="toc-text">4.2.1、Dao:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2%E3%80%81service"><span class="toc-number">2.2.</span> <span class="toc-text">4.2.2、service:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3%E3%80%81controller"><span class="toc-number">2.3.</span> <span class="toc-text">4.2.3、controller:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4%E3%80%81%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">4.2.4、前端页面：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5%E3%80%81%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9A"><span class="toc-number">2.5.</span> <span class="toc-text">4.2.5、启动服务器：</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">DaiHaojun</div><div class="author-info__description text-center">记录学习日常</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">25</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">36</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">myblog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">HiveDemo</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-04-21</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p> 数据： (美国骑行单车的记录)、</p>
<p><strong>csv数据以逗号分割的数据</strong></p>
<p><img src="/2022/04/21/HiveDemo/image-20220421145746201.png" alt="image-20220421145746201"></p>
<h2 id="Hive案例：骑行案例数据分析和可视化"><a href="#Hive案例：骑行案例数据分析和可视化" class="headerlink" title="Hive案例：骑行案例数据分析和可视化"></a>Hive案例：骑行案例数据分析和可视化</h2><p>要求：分析2019年6月的30天的骑行数据，去比对每天每小时的骑行数量</p>
<p>横坐标：每小时</p>
<p>纵坐标：骑行的数量</p>
<p>图例：日期</p>
<h1 id="一、开始："><a href="#一、开始：" class="headerlink" title="一、开始："></a>一、开始：</h1><h2 id="1-1、上传文件到HDFS上的根目录下"><a href="#1-1、上传文件到HDFS上的根目录下" class="headerlink" title="1.1、上传文件到HDFS上的根目录下"></a>1.1、上传文件到HDFS上的根目录下</h2><p><a target="_blank" rel="noopener" href="https://hadoop02:9000/201906.csv">https://hadoop02:9000/201906.csv</a></p>
<h2 id="1-2、建库"><a href="#1-2、建库" class="headerlink" title="1.2、建库"></a>1.2、建库</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database nybikedb</span><br></pre></td></tr></table></figure>

<p>用一下库</p>
<h2 id="1-3、建表-车次数据表-tb-trip-06"><a href="#1-3、建表-车次数据表-tb-trip-06" class="headerlink" title="1.3、建表:车次数据表 tb_trip_06"></a>1.3、建表:车次数据表 tb_trip_06</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_trip_06(tripduration <span class="type">int</span>,starttime string, stoptime string,start_station_id <span class="type">int</span>,start_station_name string,start_station_latitude <span class="keyword">double</span>,start_station_longitude <span class="keyword">double</span>,stop_station_id <span class="type">int</span>,stop_station_name string,stop_station_latitude <span class="keyword">double</span>,stop_station_longitude <span class="keyword">double</span>,bikeid <span class="type">int</span>,usertype string,birth_year <span class="type">int</span>,gender <span class="type">int</span>) <span class="type">row</span> format delimited fields  terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220421154743566.png" alt="image-20220421154743566"></p>
<h2 id="1-4、导入数据"><a href="#1-4、导入数据" class="headerlink" title="1.4、导入数据"></a>1.4、导入数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">load data inpath <span class="string">&#x27;hdfs://hadoop02:9000/201906.csv&#x27;</span> overwrite <span class="keyword">into</span> <span class="keyword">table</span> tb_trip_06;</span><br></pre></td></tr></table></figure>

<p>(这个前提是你已经把你的数据上传到了hdfs上，然后从hdfs上导入数据到刚建的表中)</p>
<p><strong>注：数据导入完后记得查一下数量有多少条,来保证确实插入了数据</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220421165537353.png" alt="image-20220421165537353"></p>
<h2 id="1-5、分析"><a href="#1-5、分析" class="headerlink" title="1.5、分析"></a>1.5、分析</h2><p>数据清洗：使用hivesql语句对tb_trip_06表中的数据进行分析，将分析的结果数据保存在另外的一张表里</p>
<p>tb_trip_day_hour_count中</p>
<p>需要的字段名：日期，小时，骑行的数量</p>
<p>day,hour,count(*)</p>
<p>可以使用day(),hour(),快速获取到日期和小时</p>
<p>骑行的数量：记录表中骑行的条数，可以使用count(*)</p>
<h1 id="二、设计hivesql语句"><a href="#二、设计hivesql语句" class="headerlink" title="二、设计hivesql语句"></a>二、设计hivesql语句</h1><h2 id="2-1、查询一天每小时的骑行数量"><a href="#2-1、查询一天每小时的骑行数量" class="headerlink" title="2.1、查询一天每小时的骑行数量"></a>2.1、查询一天每小时的骑行数量</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime);</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220421185637691.png" alt="image-20220421185637691"></p>
<p>这里是无序的 排序要用order by 语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime) <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime);</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220421191345639.png" alt="image-20220421191345639"></p>
<p>报错：意思是他没有找到starttime这一列，有可能是c0和，_c1</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime) <span class="keyword">order</span> <span class="keyword">by</span> _c0,_c1;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220421191901746.png" alt="image-20220421191901746"></p>
<p>这里报错：是因为”_”在hive里是关键字要用&#96;&#96;引起来</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime) <span class="keyword">order</span> <span class="keyword">by</span> `_c0`,`_c1`;</span><br></pre></td></tr></table></figure>

<h2 id="2-2、建立一张表叫做tb-trip-day-hour-count，"><a href="#2-2、建立一张表叫做tb-trip-day-hour-count，" class="headerlink" title="2.2、建立一张表叫做tb_trip_day_hour_count，"></a>2.2、建立一张表叫做tb_trip_day_hour_count，</h2><p>字段有   <strong>day int,hour int, counts int</strong></p>
<p>然后将上一步的查询结果导入表中</p>
<p>最后将表中的数据进行可视化(可以先展示一天的，再去搞得三十天的)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_trip_day_hour_count( <span class="keyword">day</span> <span class="type">int</span>,<span class="keyword">hour</span> <span class="type">int</span>,counts <span class="type">int</span>) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-1、将查询出来的数据写到一个文件夹"><a href="#2-2-1、将查询出来的数据写到一个文件夹" class="headerlink" title="2.2.1、将查询出来的数据写到一个文件夹"></a>2.2.1、将查询出来的数据写到一个文件夹</h3><p>这句是建表语句</p>
<p>然后将查询出来的结果写入一个文件，再将那个文件里的内容导入到<strong>tb_trip_day_hour_count</strong>中去</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">local</span> directory <span class="string">&#x27;/home/software/apache-hive-2.3.6-</span></span><br><span class="line"><span class="string">bin/test/trip_day_hour_count/result&#x27;</span> <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27; &#x27;</span> <span class="keyword">select</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_trip_06 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">day</span>(starttime),<span class="keyword">hour</span>(starttime) <span class="keyword">order</span> <span class="keyword">by</span> `_c0`,`_c1`;</span><br></pre></td></tr></table></figure>

<p>执行后会生成一个文件</p>
<p>在&#x2F;home&#x2F;software&#x2F;apache-hive-2.3.6-bin&#x2F;test&#x2F;trip_day_hour_count&#x2F;result目录下</p>
<p><img src="/2022/04/21/HiveDemo/image-20220421200112613.png" alt="image-20220421200112613"></p>
<h3 id="2-2-2、导入数据"><a href="#2-2-2、导入数据" class="headerlink" title="2.2.2、导入数据"></a>2.2.2、导入数据</h3><p><img src="/2022/04/21/HiveDemo/image-20220421195718973.png" alt="image-20220421195718973"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/home/software/apache-hive-2.3.6-bin/test/trip_day_hour_count/result/000000_0&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> nybikedb.tb_trip_day_hour_count;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2022/04/21/HiveDemo/image-20220421201926535.png" alt="image-20220421201926535"></p>
<p>导入数据成功！</p>
<h1 id="三、写java代码"><a href="#三、写java代码" class="headerlink" title="三、写java代码"></a>三、写java代码</h1><h2 id="3-1、pojo层"><a href="#3-1、pojo层" class="headerlink" title="3.1、pojo层"></a>3.1、pojo层</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCount</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> day;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> hour;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;DayHourCount&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;day=&quot;</span> + day +</span><br><span class="line">                <span class="string">&quot;, hour=&quot;</span> + hour +</span><br><span class="line">                <span class="string">&quot;, count=&quot;</span> + count +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDay</span><span class="params">(<span class="type">int</span> day)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHour</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHour</span><span class="params">(<span class="type">int</span> hour)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hour = hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DayHourCount</span><span class="params">(<span class="type">int</span> day, <span class="type">int</span> hour, <span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.day = day;</span><br><span class="line">        <span class="built_in">this</span>.hour = hour;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DayHourCount</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2、数据库连接"><a href="#3-2、数据库连接" class="headerlink" title="3.2、数据库连接"></a>3.2、数据库连接</h2><p>将所需要的依赖导入进来</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.34<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-mapreduce-client-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-mapreduce-client-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-jdbc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hive<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hive-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-jdbc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hive<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hive-exec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/jdk.tools/jdk.tools --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.58<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>写一个操作数据库连接的工具类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span> <span class="title class_">DButil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:hive2://192.168.59.100:10000/nybikedb&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Connection conn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;org.apache.hive.jdbc.HiveDriver&quot;</span>);</span><br><span class="line">            <span class="comment">// 2、获取连接对象]</span></span><br><span class="line">            conn= DriverManager.getConnection(url,userName,password);</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;成功拿到了连接对象了！！对象的地址为:&quot;</span>+conn);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;获取数据库连接对象失败！！);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125; catch (ClassNotFoundException e) &#123;</span></span><br><span class="line"><span class="string">            e.printStackTrace();</span></span><br><span class="line"><span class="string">        &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">            throwables.printStackTrace();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    /**</span></span><br><span class="line"><span class="string">     * 获取连接对象的方法</span></span><br><span class="line"><span class="string">     * @return</span></span><br><span class="line"><span class="string">     */</span></span><br><span class="line"><span class="string">    public static Connection getConn()&#123;</span></span><br><span class="line"><span class="string">        return conn;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    /**</span></span><br><span class="line"><span class="string">     * 关闭三个对象的方法</span></span><br><span class="line"><span class="string">     * @param rs</span></span><br><span class="line"><span class="string">     * @param ps</span></span><br><span class="line"><span class="string">     * @param conn</span></span><br><span class="line"><span class="string">     */</span></span><br><span class="line"><span class="string">    public static void close(ResultSet rs, PreparedStatement ps,Connection conn)&#123;</span></span><br><span class="line"><span class="string">        if (rs!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                rs.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭结果集对象成功!<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (ps!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                ps.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭操作对象成功！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (conn!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                conn.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭连接对象成功！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">                                   </span></span><br><span class="line"><span class="string">    public static void close( PreparedStatement ps,Connection conn)&#123;</span></span><br><span class="line"><span class="string">        if (ps!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                ps.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭操作对象成功!<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (conn!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                conn.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭连接对象成功！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    public static void close(Connection conn)&#123;</span></span><br><span class="line"><span class="string">        if (conn!=null)&#123;</span></span><br><span class="line"><span class="string">            try &#123;</span></span><br><span class="line"><span class="string">                conn.close();</span></span><br><span class="line"><span class="string">                System.out.println(&quot;</span>关闭连接对象成功！<span class="string">&quot;);</span></span><br><span class="line"><span class="string">            &#125; catch (SQLException throwables) &#123;</span></span><br><span class="line"><span class="string">                throwables.printStackTrace();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    /**</span></span><br><span class="line"><span class="string">     * 获得prestatment对象的方法</span></span><br><span class="line"><span class="string">     */</span></span><br><span class="line"><span class="string">    public static PreparedStatement getPre(String sql) throws SQLException &#123;</span></span><br><span class="line"><span class="string">      return  conn.prepareStatement(sql);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3、测试是否成功连接数据库"><a href="#3-3、测试是否成功连接数据库" class="headerlink" title="3.3、测试是否成功连接数据库"></a>3.3、测试是否成功连接数据库</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试是否能够拿到连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@org</span>.junit.Test</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testConnectDB</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// 1、加载驱动</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DButil.getConn();</span><br><span class="line"><span class="comment">//    System.out.println(conn);</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_trip_day_hour_count limit ?,?&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pre</span> <span class="operator">=</span> DButil.getPre(sql);</span><br><span class="line">        pre.setInt(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        pre.setInt(<span class="number">2</span>,<span class="number">100</span>);</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> pre.executeQuery();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;第&quot;</span>+i+<span class="string">&quot;条数据：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> day= resultSet.getInt(<span class="number">1</span>);</span><br><span class="line">            <span class="type">int</span> hour= resultSet.getInt(<span class="number">2</span>);</span><br><span class="line">            <span class="type">int</span> count= resultSet.getInt(<span class="number">3</span>);</span><br><span class="line">            <span class="type">DayHourCount</span> <span class="variable">dhc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCount</span>(day, hour, count);</span><br><span class="line">            System.out.println(dhc);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        DButil.close(resultSet,pre,conn);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>确实成功了！</p>
<h2 id="3-4、Dao层"><a href="#3-4、Dao层" class="headerlink" title="3.4、Dao层"></a>3.4、Dao层</h2><p>分析：</p>
<p>1、主要的目的就是拿到tb_trip_day_hour_count这张表 的所有数据，所以写一个叫做listDateInfo() 的方法，直接拿到所有的数据。</p>
<p>2、但是拿到数据我们的目的是返回给前端数据，让他给我们可视化，所以我们将取出来的数据封装成我们创建的实体类对象。</p>
<p>3、一次查询有多个对象，就用一个集合装起来<code>  List&lt;DayHourCount&gt; DateInfo = new ArrayList&lt;DayHourCount&gt;();</code>每次遍历一个就往集合放一个</p>
<p>4、最后返回这个集合</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCountDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DButil.getConn();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *拿到tb_trip_day_hour_count所有的数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;DayHourCount&gt; <span class="title function_">listDateInfo</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_trip_day_hour_count&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line">        List&lt;DayHourCount&gt; DateInfo = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;DayHourCount&gt;();</span><br><span class="line">        <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">            <span class="comment">//取值</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> rs.getInt(<span class="number">1</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> rs.getInt(<span class="number">2</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> rs.getInt(<span class="number">3</span>);</span><br><span class="line">            <span class="comment">//封装数据</span></span><br><span class="line">            <span class="type">DayHourCount</span> <span class="variable">dayHourCount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCount</span>(day, hour, count);</span><br><span class="line">            DateInfo.add(dayHourCount);</span><br><span class="line">        &#125;</span><br><span class="line">        DButil.close(rs,ps);</span><br><span class="line">        <span class="keyword">return</span> DateInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-5、service层"><a href="#3-5、service层" class="headerlink" title="3.5、service层"></a>3.5、service层</h2><p>分析：</p>
<p>service 层必须要任何业务逻辑，直接返回数据就行</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCountService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">DayHourCountDao</span> <span class="variable">dao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCountDao</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回日期信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;DayHourCount&gt; <span class="title function_">listDateInfo</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> dao.listDateInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-6、Controller层"><a href="#3-6、Controller层" class="headerlink" title="3.6、Controller层"></a>3.6、Controller层</h2><p>分析：</p>
<p>1、调用service层 拿到所有数据的集合，然后给前台</p>
<p>2、但是我们拿到的是集合，我们把他转成字符串，响应给前台</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/listAll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCountController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">DayHourCountService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCountService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将字符串返回给前台</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;DayHourCount&gt; list = service.listDateInfo();</span><br><span class="line">            <span class="comment">//将list转换成json字符串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> JSON.toJSONString(list);</span><br><span class="line">            resp.getWriter().write(jsonStr);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<p>看是否拿到了数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> url1 = <span class="string">&quot;/nybike/&quot;</span></span><br><span class="line">    $.<span class="title function_">get</span>(url1 + <span class="string">&quot;listAll&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">        data=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/HiveDemo/image-20220422211215773.png" alt="image-20220422211215773"></p>
<p>ok拿到数据！720条一条不少！</p>
<h1 id="四、画Echarts图"><a href="#四、画Echarts图" class="headerlink" title="四、画Echarts图"></a>四、画Echarts图</h1><p><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/index.html">Apache ECharts</a></p>
<h2 id="4-1、画图之前先解决一下控制台乱码问题"><a href="#4-1、画图之前先解决一下控制台乱码问题" class="headerlink" title="4.1、画图之前先解决一下控制台乱码问题"></a>4.1、画图之前先解决一下控制台乱码问题</h2><p><img src="/2022/04/21/HiveDemo/image-20220422211937803.png" alt="image-20220422211937803"></p>
<p>加上这个</p>
<p><img src="/2022/04/21/HiveDemo/image-20220422212012538.png" alt="image-20220422212012538"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">-Dfile.encoding</span>=<span class="string">UTF-8</span></span><br></pre></td></tr></table></figure>

<p>点击apply and ok！</p>
<h2 id="4-2、先获取某一天的数据的数据图像"><a href="#4-2、先获取某一天的数据的数据图像" class="headerlink" title="4.2、先获取某一天的数据的数据图像"></a>4.2、先获取某一天的数据的数据图像</h2><p>分析：</p>
<p>获取某一天肯定<strong>要传入一个参数</strong>所以先写一下Dao层和service层</p>
<h3 id="4-2-1、Dao"><a href="#4-2-1、Dao" class="headerlink" title="4.2.1、Dao:"></a>4.2.1、Dao:</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询某一天的数据记录 x轴：时间 y轴:数量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;DayHourCount&gt; <span class="title function_">listDateInfoByDay</span><span class="params">(<span class="type">int</span> day1)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    List&lt;DayHourCount&gt; DateInfo = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;DayHourCount&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select day,hour,counts from tb_trip_day_hour_count where day=?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">    ps.setInt(<span class="number">1</span>,day1);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line">    <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">        <span class="comment">//取值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> rs.getInt(<span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> rs.getInt(<span class="number">2</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> rs.getInt(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//封装数据</span></span><br><span class="line">        <span class="type">DayHourCount</span> <span class="variable">dayHourCount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCount</span>(day, hour, count);</span><br><span class="line">        DateInfo.add(dayHourCount);</span><br><span class="line">    &#125;</span><br><span class="line">    DButil.close(rs, ps);</span><br><span class="line">    <span class="keyword">return</span> DateInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-2、service"><a href="#4-2-2、service" class="headerlink" title="4.2.2、service:"></a>4.2.2、service:</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCountService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">DayHourCountDao</span> <span class="variable">dao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCountDao</span>();</span><br><span class="line">    <span class="keyword">public</span> List&lt;DayHourCount&gt; <span class="title function_">listDateInfoByDay</span><span class="params">(<span class="type">int</span> day)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> dao.listDateInfoByDay(day);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3、controller"><a href="#4-2-3、controller" class="headerlink" title="4.2.3、controller:"></a>4.2.3、controller:</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/listByday&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayHourCountByDayController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">DayHourCountService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DayHourCountService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">day</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;day&quot;</span>);</span><br><span class="line">        <span class="comment">//这里的day是前端ajax请求传过来的参数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Integer.parseInt(day);</span><br><span class="line">        <span class="comment">//把他转化成int类型</span></span><br><span class="line">        <span class="comment">//System.out.println(day);</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;DayHourCount&gt; list = service.listDateInfoByDay(i);</span><br><span class="line">            <span class="comment">//将list转换成json字符串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> JSON.toJSONString(list);</span><br><span class="line">            <span class="comment">//将字符串返回给前台</span></span><br><span class="line">            resp.getWriter().write(jsonStr);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-4、前端页面："><a href="#4-2-4、前端页面：" class="headerlink" title="4.2.4、前端页面："></a>4.2.4、前端页面：</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>DayHourCount数据<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.11.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/echarts.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 1000px;height: 800px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> url1 = <span class="string">&quot;/nybike/&quot;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> day = <span class="title function_">prompt</span>(<span class="string">&quot;输入你想查看哪一天的数据！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/nybike/listByday&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//请求的参数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="string">&quot;day&quot;</span>:day</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//请求成功后的回调函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//请求成功后就开始画图</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data = JSON.parse(data);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> option = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 指定图表的配置项和数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">text</span>: <span class="string">&quot;某一天纽约共享单车使用情况&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: data.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> item.<span class="property">hour</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">boundaryGap</span>: [<span class="string">&#x27;20%&#x27;</span>, <span class="string">&#x27;20%&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tooltip</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">legend</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;value&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&quot;数量&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">series</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: data.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> item.<span class="property">count</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;]</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            myChart.<span class="title function_">setOption</span>(option)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;服务器内部错误~&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-5、启动服务器："><a href="#4-2-5、启动服务器：" class="headerlink" title="4.2.5、启动服务器："></a>4.2.5、启动服务器：</h3><p><img src="/2022/04/21/HiveDemo/image-20220422234637580.png" alt="image-20220422234637580"></p>
<p><img src="/2022/04/21/HiveDemo/image-20220422234659886.png" alt="image-20220422234659886"></p>
<p><img src="/2022/04/21/HiveDemo/image-20220422234717951.png" alt="image-20220422234717951"></p>
<p>成功展示某一天的数据！</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">DaiHaojun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://daihaojun554.github.io/2022/04/21/HiveDemo/">http://daihaojun554.github.io/2022/04/21/HiveDemo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hive/">Hive</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/04/23/Ajax%E8%AF%B7%E6%B1%82/"><i class="fa fa-chevron-left">  </i><span>Ajax请求</span></a></div><div class="next-post pull-right"><a href="/2022/04/21/Spring/"><span>Spring</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2023 By DaiHaojun</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://daihaojun.top">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://lib.baomitu.com/animejs/latest/anime.min.js"></script><script src="https://lib.baomitu.com/jquery/latest/jquery.min.js"></script><script src="https://lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script src="https://lib.baomitu.com/velocity/latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>