<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Spring"><meta name="keywords" content="框架,Spring"><meta name="author" content="DaiHaojun"><meta name="copyright" content="DaiHaojun"><title>Spring | myblog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="myblog" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring"><span class="toc-number">1.</span> <span class="toc-text">Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring-%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%AE%8C%E6%88%90%E5%AE%9E%E4%BE%8B%E5%92%8C%E5%88%9B%E5%BB%BA%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.0.0.0.1.</span> <span class="toc-text">Spring 容器组件，用于完成实例和创建的管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81core"><span class="toc-number">1.0.0.0.2.</span> <span class="toc-text">1、core</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E3%80%81bean%E5%AE%9E%E4%BE%8B%E7%AE%A1%E7%90%86"><span class="toc-number">1.0.0.0.3.</span> <span class="toc-text">2 、bean实例管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E3%80%81context-%E5%AE%B9%E5%99%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-number">1.0.0.0.4.</span> <span class="toc-text">3 、context 容器上下文</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Spring%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">一、Spring概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%98%E7%BD%91%EF%BC%9Ahttps-spring-io"><span class="toc-number">2.0.0.0.1.</span> <span class="toc-text">官网：https:&#x2F;&#x2F;spring.io</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">Spring架构图：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">三大组件：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E3%80%81%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">1 、核心容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E3%80%81Aop%E3%80%81Aspects-%EF%BC%88%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">2 、Aop、Aspects （面向切面编程）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E3%80%81Web"><span class="toc-number">2.5.</span> <span class="toc-text">3 、Web</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring-web%E7%BB%84%E4%BB%B6%E5%AE%9E%E9%99%85%E6%98%AF%E6%8C%87%E7%9A%84%E6%98%AFSpringMVC%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%AE%9E%E7%8E%B0web%E9%A1%B9%E7%9B%AE%E7%9A%84MVC%E6%8E%A7%E5%88%B6"><span class="toc-number">2.5.0.0.1.</span> <span class="toc-text">Spring web组件实际是指的是SpringMVC框架，实现web项目的MVC控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#web%EF%BC%88Spring%E5%AF%B9web%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%89"><span class="toc-number">2.5.0.0.2.</span> <span class="toc-text">web（Spring对web项目的支持）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#webmve%EF%BC%88SpringMVC%EF%BC%89"><span class="toc-number">2.5.0.0.3.</span> <span class="toc-text">webmve（SpringMVC）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E3%80%81%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE"><span class="toc-number">2.6.</span> <span class="toc-text">4 、数据访问</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E6%8D%AE%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">2.6.0.0.1.</span> <span class="toc-text">对数据的访问</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E7%BB%84%E4%BB%B6%EF%BC%8C%E4%B9%9F%E6%98%AF%E5%9F%BA%E4%BA%8E%E5%AF%B9JDBC%E5%B0%81%E8%A3%85"><span class="toc-number">2.6.0.0.2.</span> <span class="toc-text">Spring数据访问组件，也是基于对JDBC封装</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-number">2.7.</span> <span class="toc-text">5 、测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BB%84%E4%BB%B6%EF%BC%8C%E6%8F%90%E4%BE%9B%E4%BA%86Spring%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">2.7.0.0.1.</span> <span class="toc-text">Spring的单元测试组件，提供了Spring环境下的单元测试</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81SpringIOC%EF%BC%88%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">二、SpringIOC（控制反转）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Spring%E6%A1%86%E6%9E%B6%E7%9A%84%E9%83%A8%E7%BD%B2%EF%BC%88IOC%EF%BC%89"><span class="toc-number">3.0.1.</span> <span class="toc-text">2.1 Spring框架的部署（IOC）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%AE%8C%E6%88%90%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%A4%8D%E5%88%B6%EF%BC%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">3.0.1.0.1.</span> <span class="toc-text">容器组件，可以完成对象创建和对象的复制，对象的管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAmaven%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.0.1.0.2.</span> <span class="toc-text">创建maven项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0SpringIoc%E4%BE%9D%E8%B5%96"><span class="toc-number">3.0.1.0.3.</span> <span class="toc-text">添加SpringIoc依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#core"><span class="toc-number">3.0.1.0.4.</span> <span class="toc-text">core</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bean"><span class="toc-number">3.0.1.0.5.</span> <span class="toc-text">bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#context"><span class="toc-number">3.0.1.0.6.</span> <span class="toc-text">context</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#context-%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5%EF%BC%9A"><span class="toc-number">3.0.1.0.7.</span> <span class="toc-text">context 依赖导入：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81Spring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.0.2.</span> <span class="toc-text">2.2、Spring的配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%91%8A%E8%AF%89%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA%E4%BB%80%E4%B9%88%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%B5%8B%E4%BB%80%E4%B9%88%E5%80%BC"><span class="toc-number">3.0.2.0.1.</span> <span class="toc-text">通过配置文件告诉容器创建什么对象，赋什么值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8resource%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E5%90%8D%E4%B8%BA-applicationContext-xml"><span class="toc-number">3.0.2.0.2.</span> <span class="toc-text">在resource目录下创建名为 applicationContext.xml</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-SpringIoc%E4%BD%BF%E7%94%A8"><span class="toc-number">3.0.3.</span> <span class="toc-text">2.3 SpringIoc使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1%EF%BC%9A-%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">3.0.3.0.1.</span> <span class="toc-text">2.3.1： 创建实体类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2%EF%BC%9A%E4%BD%BF%E7%94%A8spring%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.0.3.0.2.</span> <span class="toc-text">2.3.2：使用spring创建实体类的实例对象</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ioc%E5%92%8CDI"><span class="toc-number">3.0.4.</span> <span class="toc-text">Ioc和DI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ioc"><span class="toc-number">3.0.5.</span> <span class="toc-text">Ioc</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BD%93%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E9%80%9A%E8%BF%87Spring%E5%B7%A5%E5%8E%82%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%88%91%E4%BB%AC%E8%A6%81%E5%B0%86%E5%AF%B9%E8%B1%A1%E4%BA%A4%E7%BB%99bean%E6%A0%87%E7%AD%BE"><span class="toc-number">3.0.5.0.1.</span> <span class="toc-text">当我们需要通过Spring工厂创建对象的时候，我们要将对象交给bean标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DI%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%9Aset%E6%B3%A8%E5%85%A5-%E8%83%BD%E7%BB%99%E5%AF%B9%E8%B1%A1%E8%B5%8B%E5%80%BC"><span class="toc-number">3.0.6.</span> <span class="toc-text">DI依赖注入：set注入 (能给对象赋值)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%8E%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%88%9B%E5%BB%BA%E7%B1%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B9%B6%E7%BB%99%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-number">3.0.6.0.1.</span> <span class="toc-text">Spring加载配置文件后通过反射创建类的对象，并给属性赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E6%98%AF%E5%8F%8D%E5%B0%84"><span class="toc-number">3.0.6.0.2.</span> <span class="toc-text">底层是反射</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DI-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.0.6.0.3.</span> <span class="toc-text">DI(依赖注入)的三种方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%8B%E5%80%BC%EF%BC%9A%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87property%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC-name-value"><span class="toc-number">3.0.6.0.4.</span> <span class="toc-text">简单类型的赋值：直接通过property的属性赋值 name value</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%EF%BC%9A"><span class="toc-number">3.0.6.0.5.</span> <span class="toc-text">例：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A"><span class="toc-number">3.0.6.1.</span> <span class="toc-text">方式一：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%8B%E5%80%BC%EF%BC%9A%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87property%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC-name-%EF%BC%8Cref-%E5%85%B6%E4%B8%ADref%E6%98%AFspring%E5%AE%B9%E5%99%A8%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.0.6.1.1.</span> <span class="toc-text">引用类型的赋值：直接通过property的属性赋值 name ，ref 其中ref是spring容器的对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%EF%BC%9A%E6%97%A5%E6%9C%9F"><span class="toc-number">3.0.6.1.2.</span> <span class="toc-text">例：日期</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A"><span class="toc-number">3.0.6.2.</span> <span class="toc-text">方式二：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%8B%E5%80%BC%EF%BC%9A%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87property%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC-name-%EF%BC%8C%E4%B8%8D%E8%A6%81ref%E6%A0%87%E7%AD%BE%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E5%88%B0property%E9%87%8C%E9%9D%A2%E5%8A%A0%E5%85%A5%E4%B8%80%E4%B8%AA"><span class="toc-number">3.0.6.2.1.</span> <span class="toc-text">引用类型的赋值：直接通过property的属性赋值 name ，不要ref标签，然后再到property里面加入一个</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bean%E6%A0%87%E7%AD%BE"><span class="toc-number">3.0.6.2.2.</span> <span class="toc-text">bean标签</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="toc-number">3.0.6.3.</span> <span class="toc-text">集合类型的赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#List%EF%BC%9A"><span class="toc-number">3.0.6.3.1.</span> <span class="toc-text">List：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#List%EF%BC%9A-1"><span class="toc-number">3.0.6.3.2.</span> <span class="toc-text">List：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#List%EF%BC%9A-2"><span class="toc-number">3.0.6.3.3.</span> <span class="toc-text">List：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.0.6.3.4.</span> <span class="toc-text">第一种方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.0.6.3.5.</span> <span class="toc-text">第二种方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Set%E8%B7%9F%E4%B8%8A%E9%9D%A2%E7%9A%84List%E4%B8%80%E6%A0%B7"><span class="toc-number">3.0.6.3.6.</span> <span class="toc-text">Set跟上面的List一样</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Map%EF%BC%9A"><span class="toc-number">3.0.6.3.7.</span> <span class="toc-text">Map：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DI%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%9A%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5-%E8%83%BD%E7%BB%99%E5%AF%B9%E8%B1%A1%E8%B5%8B%E5%80%BC"><span class="toc-number">3.0.7.</span> <span class="toc-text">DI依赖注入：构造器注入 (能给对象赋值)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%99%E4%B8%AAbook%E7%B1%BB%E6%B2%A1%E6%9C%89set%E6%96%B9%E6%B3%95"><span class="toc-number">3.0.7.0.1.</span> <span class="toc-text">这个book类没有set方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5%E6%B3%A8%E5%85%A5%E7%9A%84%E6%97%B6%E5%80%99%E8%A6%81-%E4%BF%9D%E8%AF%81%E8%87%AA%E5%B7%B1%E5%8F%82%E6%95%B0%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%92%8C%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%B8%80%E6%A0%B7"><span class="toc-number">3.0.7.0.2.</span> <span class="toc-text">这个用构造器注入注入的时候要 保证自己参数的顺序和构造方法一样</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%86%E6%98%AF%E4%B9%9F%E5%8F%AF%E4%BB%A5-%E5%9C%A8%E6%A0%87%E7%AD%BE%E5%86%85%E5%8A%A0%E5%85%A5index%E5%B1%9E%E6%80%A7"><span class="toc-number">3.0.7.0.3.</span> <span class="toc-text">但是也可以 在标签内加入index属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.0.8.</span> <span class="toc-text">Bean的作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8Bean%E6%A0%87%E7%AD%BE%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%80%9A%E8%BF%87scope%E5%B1%9E%E6%80%A7"><span class="toc-number">3.0.8.0.1.</span> <span class="toc-text">在Bean标签中可以指定对象的作用域通过scope属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87scope%E5%B1%9E%E6%80%A7%E6%94%B9%E4%BA%86%E4%B9%8B%E5%90%8E%EF%BC%9A"><span class="toc-number">3.0.8.0.2.</span> <span class="toc-text">通过scope属性改了之后：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#scope-x3D-%E2%80%9Dprototype%E2%80%9D-%E6%97%B6-%E4%B8%BA-%E9%9D%9E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-%E6%AF%8F%E9%80%9A%E8%BF%87%E5%AE%B9%E5%99%A8%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84"><span class="toc-number">3.0.8.0.3.</span> <span class="toc-text">scope&#x3D;”prototype” 时 为 非单例模式 每通过容器获取对象的时候就会创建一个新的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%86%99scope%E9%BB%98%E8%AE%A4%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-%E9%A5%BF%E6%B1%89%E6%A8%A1%E5%BC%8F%EF%BC%9ASpring%E5%AE%B9%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%8C%E6%88%90%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">3.0.8.0.4.</span> <span class="toc-text">不写scope默认单例模式 饿汉模式：Spring容器初始化阶段就可以完成对象的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%86%E6%98%AF%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8bean%E6%A0%87%E7%AD%BE%E9%87%8C%E7%9A%84lazy-init%E5%B1%9E%E6%80%A7%E6%94%B9%E4%B8%BA%E6%87%92%E6%B1%89%E5%BC%8F"><span class="toc-number">3.0.8.0.5.</span> <span class="toc-text">但是也可以用bean标签里的lazy-init属性改为懒汉式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="toc-number">3.0.8.0.6.</span> <span class="toc-text">单例模式：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E8%A6%81%E7%94%A8%E7%9A%84%E6%97%B6%E5%80%99%E5%88%9B%E5%BB%BA"><span class="toc-number">3.0.8.0.7.</span> <span class="toc-text">对象要用的时候创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E7%AE%A1%E4%BD%A0%E7%94%A8%E4%B8%8D%E7%94%A8-%E5%8F%8D%E6%AD%A3%E5%B0%B1%E5%88%9B%E5%BB%BA"><span class="toc-number">3.0.8.0.8.</span> <span class="toc-text">不管你用不用 反正就创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%9A%84%E9%83%BD%E6%98%AF%E9%A5%BF%E6%B1%89%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.0.8.0.9.</span> <span class="toc-text">默认的都是饿汉的单例模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95"><span class="toc-number">3.0.9.</span> <span class="toc-text">Bean的生命周期方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%9C%A8bean%E6%A0%87%E7%AD%BE%E4%B8%AD%E9%80%9A%E8%BF%87init-method%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%E8%8E%B7%E5%8F%96%E5%88%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%97%B6%E5%80%99%E6%89%A7%E8%A1%8C%E4%B8%80%E4%BA%9Binit%E6%96%B9%E6%B3%95-%E5%9C%A8%E6%9E%84%E9%80%A0%E5%99%A8%E4%B9%8B%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C"><span class="toc-number">3.0.9.0.1.</span> <span class="toc-text">可以在bean标签中通过init-method属性设置获取到对象的时候执行一些init方法 在构造器之后执行，</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#destory%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E9%94%80%E6%AF%81%E6%96%B9%E6%B3%95%E5%9C%A8%E5%AE%B9%E5%99%A8%E5%85%B3%E9%97%AD%E5%89%8D%E6%89%A7%E8%A1%8C-%E8%BF%99%E4%BA%9B%E6%96%B9%E6%B3%95%E5%BF%85%E9%A1%BB%E6%98%AF%E5%9C%A8Book%EF%BC%88%E5%AE%9E%E4%BD%93%EF%BC%89%E7%B1%BB%E4%B8%AD"><span class="toc-number">3.0.9.0.2.</span> <span class="toc-text">destory方法可以指定销毁方法在容器关闭前执行 这些方法必须是在Book（实体）类中</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%88%E9%9C%80%E8%A6%81%E6%8F%90%E4%BE%9Bset%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">3.0.10.</span> <span class="toc-text">自动装配（需要提供set方法）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%EF%BC%9A"><span class="toc-number">3.0.10.0.1.</span> <span class="toc-text">别名：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#autowire-x3D-%E2%80%9DbyName%E2%80%9D%EF%BC%9A"><span class="toc-number">3.0.10.0.2.</span> <span class="toc-text">autowire&#x3D;”byName”：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring%E5%9C%A8%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%97%B6%E5%80%99%E5%BD%93%E5%89%8Dbean%E7%9A%84%E6%97%B6%E5%80%99%E4%BB%8E%E5%BD%93%E5%89%8D%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%88%B0%E5%8C%B9%E9%85%8D%E5%AE%9E%E4%BE%8B%E7%84%B6%E5%90%8E%E7%BB%99%E5%AE%83%E8%B5%8B%E5%80%BC"><span class="toc-number">3.0.10.0.3.</span> <span class="toc-text">Spring在创建对象的时候当前bean的时候从当前容器中获取到匹配实例然后给它赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A4%E6%97%B6%E8%8E%B7%E5%8F%96%E7%9A%84student%E5%AF%B9%E8%B1%A1%E6%9C%89clazz%E5%B1%9E%E6%80%A7%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">3.0.10.0.4.</span> <span class="toc-text">此时获取的student对象有clazz属性自动装配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%89%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">3.0.10.0.5.</span> <span class="toc-text">按类型：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#autowire-x3D-%E2%80%9DbyType%E2%80%9D%EF%BC%9A"><span class="toc-number">3.0.10.0.6.</span> <span class="toc-text">autowire&#x3D;”byType”：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%B1%BB%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%9D%A5%E5%AF%BB%E6%89%BE%E5%8C%B9%E9%85%8D%E7%9A%84bean"><span class="toc-number">3.0.10.0.7.</span> <span class="toc-text">通过类的类型来寻找匹配的bean</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Spring%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">三、Spring基于注解的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3%E7%94%B3%E6%98%8E%E4%BA%A4%E7%BB%99spring%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%8C%E4%BB%A5%E7%AE%80%E5%8C%96%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">4.0.0.0.1.</span> <span class="toc-text">直接在实体类中添加注解申明交给spring容器管理，以简化开发步骤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E3%80%81%E5%88%9B%E5%BB%BAmaven%E4%BE%9D%E8%B5%96"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">1 、创建maven依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E3%80%81%E6%B7%BB%E5%8A%A0springioc%E4%BE%9D%E8%B5%96"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">2 、添加springioc依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E3%80%81%E5%88%9B%E5%BB%BA%E5%BC%B9%E7%B0%A7%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">3 、创建弹簧配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BASpring%E5%AE%B9%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%8C%87%E6%8C%A5%E5%AE%B6%E5%9C%A8applicationContext-xml%E6%96%87%E4%BB%B6%EF%BC%8C%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E5%9C%A8%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0"><span class="toc-number">4.0.0.3.1.</span> <span class="toc-text">因为Spring容器初始化的时候，指挥家在applicationContext.xml文件，所以我们在实体类中添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%B0%B1%E4%B8%8D%E4%BC%9A%E8%A2%ABSpring%E6%89%AB%E6%8F%8F%EF%BC%8C%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A3%B0%E6%98%8ESpring%E6%96%87%E4%BB%B6-%E7%9A%84%E6%89%AB%E6%8F%8F%E8%8C%83%E5%9B%B4"><span class="toc-number">4.0.0.3.2.</span> <span class="toc-text">的注解就不会被Spring扫描，所以我们需要在这个文件中声明Spring文件 的扫描范围</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81ioc%E5%B8%B8%E8%A7%81%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">5.</span> <span class="toc-text">四、ioc常见的注解有哪些</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%B0%86%E6%88%91%E4%BB%AC%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%BA%A4%E7%BB%99spring%E7%AE%A1%E7%90%86%EF%BC%9F"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">如何将我们的实体类交给spring管理？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AA%E9%9C%80%E8%A6%81%E5%9C%A8%E7%B1%BB%E4%B8%8A%E9%9D%A2%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA-Component-value-%E5%8F%AF%E7%9C%81"><span class="toc-number">5.0.0.1.1.</span> <span class="toc-text">只需要在类上面声明一个 @Component value 可省</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#component"><span class="toc-number">5.0.0.2.</span> <span class="toc-text">@component</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%A3%B0%E6%98%8E%E6%AD%A4%E7%B1%BB%E8%A2%ABspring%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E7%9B%B8%E5%BD%93%E4%BA%8Ebean%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.0.0.2.1.</span> <span class="toc-text">类注解，声明此类被spring容器管理相当于bean标签的作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%90%8E%E9%9D%A2%E5%86%99%E4%B8%8Avalue-x3D-%E2%80%9Dxxx%E2%80%9D%E7%9B%B8%E5%BD%93%E4%BA%8Ebean%E7%9A%84id%E5%B1%9E%E6%80%A7-value%E5%8F%AF%E7%9C%81%E7%95%A5-%E5%A6%82%E6%9E%9C%E7%9C%81%E7%95%A5%E4%B8%8D%E5%86%99%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AF%E5%BD%93%E5%89%8D%E7%B1%BB%E5%90%8D%E6%94%B9"><span class="toc-number">5.0.0.2.2.</span> <span class="toc-text">可以在后面写上value&#x3D;”xxx”相当于bean的id属性 value可省略 如果省略不写，默认是当前类名改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E5%86%99"><span class="toc-number">5.0.0.2.3.</span> <span class="toc-text">小写</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Service"><span class="toc-number">5.0.0.3.</span> <span class="toc-text">@Service</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Controller"><span class="toc-number">5.0.0.4.</span> <span class="toc-text">@Controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Responsitory"><span class="toc-number">5.0.0.5.</span> <span class="toc-text">@Responsitory</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E8%BF%99%E4%B8%89%E4%B8%AA%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BA%A4%E7%BB%99spring%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E4%BB%96%E4%BB%AC%E4%B8%BB%E8%A6%81%E6%98%AF%E8%AF%AD%E4%B9%89%E4%B8%8A%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.0.0.5.1.</span> <span class="toc-text">下面这三个也可以交给spring容器管理他们主要是语义上的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Controller-%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E5%A3%B0%E6%98%8E%E5%B0%86%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E4%BA%A4%E7%BB%99spring-%E7%AE%A1%E7%90%86-%E4%BE%8B%E5%A6%82servlet"><span class="toc-number">5.0.0.5.2.</span> <span class="toc-text">@Controller 注解主要声明将控制器类交给spring 管理 例如servlet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Service%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E5%A3%B0%E6%98%8E%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%B1%BB%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E6%8C%87Service%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">5.0.0.5.3.</span> <span class="toc-text">@Service注解主要声明业务处理类，主要是指Service接口实现类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Responsitory%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E5%A3%B0%E6%98%8E%E6%8C%81%E4%B9%85%E5%8C%96%E7%AE%A1%E7%90%86%E4%BA%A4%E7%BB%99spring%E7%AE%A1%E7%90%86%E4%BE%8B%E5%A6%82dao%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.0.0.5.4.</span> <span class="toc-text">@Responsitory注解主要声明持久化管理交给spring管理例如dao接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#component%E6%B3%A8%E8%A7%A3%E9%99%A4%E4%BA%86service-%EF%BC%8Cdao%EF%BC%8Ccontroller%E5%85%B6%E4%BB%96%E9%83%BD%E7%94%A8-component"><span class="toc-number">5.0.0.5.5.</span> <span class="toc-text">@component注解除了service ，dao，controller其他都用@component</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scope-value-x3D-%E2%80%9Dsingleton%E2%80%9D-%E6%88%96%E8%80%85-Scope-value-x3D-%E2%80%9Dprototype%E2%80%9D"><span class="toc-number">5.0.0.6.</span> <span class="toc-text">@Scope(value&#x3D;”singleton”)或者@Scope(value&#x3D;”prototype”)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BD%93%E5%89%8D%E7%B1%BB%E4%B8%BA%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E8%BF%98%E6%98%AF%E9%9D%9E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-%E9%BB%98%E8%AE%A4%E6%98%AF%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-value%E5%8F%AF%E7%9C%81"><span class="toc-number">5.0.0.6.1.</span> <span class="toc-text">声明当前类为单例模式还是非单例模式 默认是单例模式 value可省</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lazy"><span class="toc-number">5.0.0.7.</span> <span class="toc-text">@Lazy</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E8%AE%BE%E7%BD%AE%E6%88%96%E8%80%85%E8%AE%BE%E7%BD%AE%E4%B8%BAfalse-%E8%BF%99%E8%A1%A8%E7%A4%BA%E9%A5%BF%E6%B1%89%E6%A8%A1%E5%BC%8F-%E6%9C%89%E5%A4%9A%E5%B0%91%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%B0%91"><span class="toc-number">5.0.0.7.1.</span> <span class="toc-text">不设置或者设置为false 这表示饿汉模式(有多少创建多少)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%B3%A8%E8%A7%A3"><span class="toc-number">5.0.0.7.2.</span> <span class="toc-text">类注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84bean%E6%98%AF%E5%90%A6%E4%B8%BA%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.0.0.7.3.</span> <span class="toc-text">用于声明一个单例模式的bean是否为懒汉模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PostConstruct"><span class="toc-number">5.0.0.8.</span> <span class="toc-text">@PostConstruct</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E4%B8%BA%E5%BD%93%E5%89%8D%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9"><span class="toc-number">5.0.0.8.1.</span> <span class="toc-text">方法注解，声明一个方法为当前类的初始化方</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B8%E5%BD%93%E4%BA%8Ebean%E6%A0%87%E7%AD%BE%E7%9A%84init-method%E5%B1%9E%E6%80%A7"><span class="toc-number">5.0.0.8.2.</span> <span class="toc-text">相当于bean标签的init-method属性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PreDestroy"><span class="toc-number">5.0.0.9.</span> <span class="toc-text">@PreDestroy</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E4%B8%BA%E5%BD%93%E5%89%8D%E7%B1%BB%E7%9A%84%E9%94%80%E6%AF%81%E6%96%B9%E6%B3%95"><span class="toc-number">5.0.0.9.1.</span> <span class="toc-text">方法注解，声明一个方法为当前类的销毁方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B8%E5%BD%93%E4%BA%8Ebean%E6%A0%87%E7%AD%BE%E7%9A%84destory-method%E6%96%B9%E6%B3%95"><span class="toc-number">5.0.0.9.2.</span> <span class="toc-text">相当于bean标签的destory-method方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Autowired"><span class="toc-number">5.0.0.10.</span> <span class="toc-text">@Autowired</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%98%AF%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%A3%85%E9%85%8D%E7%9A%84ByType%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E4%B8%8E%E9%BB%98%E8%AE%A4%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D%E7%9A%84bean%E5%B0%B1%E4%BC%9A%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-number">5.0.0.10.1.</span> <span class="toc-text">默认是根据类型装配的ByType，如果没有找到与默认类型匹配的bean就会抛出异常</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%B3%A8%E8%A7%A3%EF%BC%8C%E6%96%B9%E6%B3%95%E6%B3%A8%E8%A7%A3set%E6%96%B9%E6%B3%95%EF%BC%8C%E5%A3%B0%E6%98%8E%E5%BD%93%E5%89%8D%E5%B1%9E%E6%80%A7%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.0.0.10.2.</span> <span class="toc-text">属性注解，方法注解set方法，声明当前属性自动装配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E5%B1%9E%E6%80%A7requird-%E9%BB%98%E8%AE%A4%E6%98%AFture-%E8%AE%BE%E7%BD%AE%E6%98%AF%E5%90%A6%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E4%B8%BA%E5%BF%85%E9%A1%BB%E7%9A%84-%EF%BC%8C%E8%AE%BE%E7%BD%AE%E4%B8%BAfalse-%E4%B8%BA%E9%9D%9E%E5%BF%85%E9%A1%BB%EF%BC%8C%E5%B0%B1%E4%B8%8D%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.0.0.10.3.</span> <span class="toc-text">有属性requird 默认是ture 设置是否自动装配为必须的 ，设置为false 为非必须，就不会自动装配</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Qualifier"><span class="toc-number">5.0.0.11.</span> <span class="toc-text">@Qualifier</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%84%8F%E6%80%9D%E5%B0%B1%E6%98%AF%E5%9C%A8spring%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%89%BE%E5%88%B0%E5%90%8D%E5%AD%97%E4%B8%BAc%E7%9A%84bean%E8%B5%8B%E5%80%BC%E7%BB%99%E6%88%91"><span class="toc-number">5.0.0.11.1.</span> <span class="toc-text">意思就是在spring容器中找到名字为c的bean赋值给我</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%90%8D%E5%AD%97%E6%9D%A5%E6%89%BEbean"><span class="toc-number">5.0.0.11.2.</span> <span class="toc-text">通过名字来找bean</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Resource"><span class="toc-number">5.0.0.12.</span> <span class="toc-text">@Resource</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.0.0.12.1.</span> <span class="toc-text">自动装配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%98%AFbyName%E6%89%BE%E5%88%B0name%E7%9B%B8%E5%90%8C%E7%9A%84%E7%9B%B4%E6%8E%A5%E8%B5%8B%E5%80%BC%EF%BC%8C%E6%89%BE%E4%B8%8D%E5%88%B0%E5%B0%B1byType-%E6%B2%A1%E6%89%BE%E5%88%B0%E5%B0%B1%E6%8A%A5%E9%94%99%EF%BC%8C%E6%89%BE%E5%88%B0%E4%B8%8D%E6%AD%A2%E4%B8%80%E4%B8%AAbean"><span class="toc-number">5.0.0.12.2.</span> <span class="toc-text">默认是byName找到name相同的直接赋值，找不到就byType ,没找到就报错，找到不止一个bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E4%B9%9F%E4%BC%9A%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-number">5.0.0.12.3.</span> <span class="toc-text">匹配也会抛出异常</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E5%B1%9E%E6%80%A7shareable-x3D-false-shareable"><span class="toc-number">5.0.0.12.4.</span> <span class="toc-text">有属性shareable&#x3D;false shareable</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%87%E7%A4%BA%E6%AD%A4%E7%BB%84%E4%BB%B6%E5%92%8C%E5%85%B6%E4%BB%96%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E5%85%B1%E4%BA%AB%E8%AF%A5%E8%B5%84%E6%BA%90%E3%80%82%E8%BF%99%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E4%BB%A3%E8%A1%A8%E4%BB%BB%E4%BD%95%E6%94%AF%E6%8C%81%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%8E%82%E7%9A%84%E8%B5%84"><span class="toc-number">5.0.0.12.5.</span> <span class="toc-text">指示此组件和其他组件之间是否可以共享该资源。这可以指定代表任何支持类型的连接工厂的资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BA%90%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%B8%8D%E8%83%BD%E4%B8%BA%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%84%E6%BA%90%E6%8C%87%E5%AE%9A%E3%80%82%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B8%83%E5%B0%94%E5%9E%8B%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AFtrue"><span class="toc-number">5.0.0.12.6.</span> <span class="toc-text">源，并且不能为其他类型的资源指定。它是一个布尔型，默认是true</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%B3%A8%E8%A7%A3"><span class="toc-number">5.0.0.12.7.</span> <span class="toc-text">属性注解</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BB%A3%E7%90%86%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">五、代理设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%B8%80%E4%B8%AAgeneral%E6%8E%A5%E5%8F%A3%E9%87%8C%E9%9D%A2%E6%9C%89%E4%B8%89%E4%B8%AA%E6%96%B9%E6%B3%95"><span class="toc-number">6.0.0.0.1.</span> <span class="toc-text">在一个general接口里面有三个方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E5%9C%A8%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%BA%86GeneralDao%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.0.0.0.2.</span> <span class="toc-text">然后在创建两个接口实现类实现了GeneralDao接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E5%86%8D%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAMyStaticProxy%E7%B1%BB%E9%87%8C%E9%9D%A2%E6%9C%89%E4%B8%80%E4%B8%AA%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">6.0.0.0.3.</span> <span class="toc-text">然后再创建一个MyStaticProxy类里面有一个有参构造方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%B1%BB%EF%BC%9A"><span class="toc-number">6.0.0.0.4.</span> <span class="toc-text">测试类：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">6.0.0.1.</span> <span class="toc-text">使用代理的好处</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E3%80%81%E8%A2%AB%E4%BB%A3%E7%90%86%E7%B1%BB%E4%B8%AD%E5%8F%AA%E7%94%A8%E5%85%B3%E6%B3%A8%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%B0%86%E9%80%9A%E7%94%A8%E7%9A%84%E7%AE%A1%E7%90%86%E5%9E%8B%E9%80%BB%E8%BE%91%EF%BC%88%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E3%80%81%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86%EF%BC%89%E5%92%8C%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%88%86%E7%A6%BB"><span class="toc-number">6.0.0.1.1.</span> <span class="toc-text">1 、被代理类中只用关注核心业务的实现，将通用的管理型逻辑（事务管理、日志管理）和业务逻辑分离</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E3%80%81%E5%B0%86%E9%80%9A%E7%94%A8%E7%9A%84%E4%BB%A3%E7%A0%81%E6%94%BE%E5%9C%A8%E4%BB%A3%E7%90%86%E7%B1%BB%E4%B8%AD%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%8F%90%E4%BE%9B%E4%BA%86%E4%BB%A3%E7%A0%81%E7%9A%84%E5%A4%8D%E7%94%A8%E6%80%A7"><span class="toc-number">6.0.0.1.2.</span> <span class="toc-text">2 、将通用的代码放在代理类中实现，提供了代码的复用性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E3%80%81%E9%80%9A%E8%BF%87%E5%9C%A8%E4%BB%A3%E7%90%86%E7%B1%BB%E6%B7%BB%E5%8A%A0%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%AF%B9%E5%8E%9F%E6%9C%89%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E5%B1%95%EF%BC%88%E5%A2%9E%E5%BC%BA"><span class="toc-number">6.0.0.1.3.</span> <span class="toc-text">3 、通过在代理类添加业务逻辑，实现对原有业务逻辑的展（增强)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">6.0.0.2.</span> <span class="toc-text">动态代理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%A0%E4%B9%8E%E5%8F%AF%E4%BB%A5%E4%B8%BA%E6%89%80%E6%9C%89%E7%B1%BB%E4%BA%A7%E7%94%9F%E4%BB%A3%E7%90%86%E6%89%80%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.0.0.2.1.</span> <span class="toc-text">几乎可以为所有类产生代理所有的对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#java%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E4%B8%A4%E7%A7%8D%EF%BC%9A"><span class="toc-number">6.0.0.2.2.</span> <span class="toc-text">java中实现动态代理的方式有两种：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">6.0.0.2.3.</span> <span class="toc-text">jdk动态代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CGlib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">6.0.0.2.4.</span> <span class="toc-text">CGlib动态代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CGlib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%B8%8D%E8%83%BD%E4%B8%BAfinal%E7%B1%BB%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.0.0.2.5.</span> <span class="toc-text">CGlib动态代理不能为final类创建代理对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%9A"><span class="toc-number">6.0.0.2.6.</span> <span class="toc-text">JDK动态代理：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CGLIB%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%BA%E5%A4%A7%E7%9A%84%E3%80%81%E9%AB%98%E6%80%A7%E8%83%BD%E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%BA%93%E3%80%82%E5%85%B6%E8%A2%AB%E5%B9%BF%E6%B3%9B%E5%BA%94%E7%94%A8%E4%BA%8EAOP%E6%A1%86%E6%9E%B6%EF%BC%88Spring%E3%80%81dynaop%EF%BC%89%E4%B8%AD%EF%BC%8C"><span class="toc-number">6.0.0.2.7.</span> <span class="toc-text">CGLIB是一个强大的、高性能的代码生成库。其被广泛应用于AOP框架（Spring、dynaop）中，</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E4%BB%A5%E6%8F%90%E4%BE%9B%E6%96%B9%E6%B3%95%E6%8B%A6%E6%88%AA%E6%93%8D%E4%BD%9C%E3%80%82Hibernate%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%AF%94%E8%BE%83%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84ORM%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%90%8C%E6%A0%B7%E4%BD%BF%E7%94%A8CGLIB%E6%9D%A5%E4%BB%A3%E7%90%86%E5%8D%95%E7%AB%AF"><span class="toc-number">6.0.0.2.8.</span> <span class="toc-text">用以提供方法拦截操作。Hibernate作为一个比较受欢迎的ORM框架，同样使用CGLIB来代理单端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%88%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%92%8C%E4%B8%80%E5%AF%B9%E4%B8%80%EF%BC%89%E5%85%B3%E8%81%94%EF%BC%88%E5%BB%B6%E8%BF%9F%E6%8F%90%E5%8F%96%E9%9B%86%E5%90%88%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%9C%BA%E5%88%B6%EF%BC%89%E3%80%82CGLIB%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%85%B6%E4%BB%A3%E7%A0%81"><span class="toc-number">6.0.0.2.9.</span> <span class="toc-text">（多对一和一对一）关联（延迟提取集合使用的另一种机制）。CGLIB作为一个开源项目，其代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%98%E7%AE%A1%E5%9C%A8github%EF%BC%8C%E5%9C%B0%E5%9D%80%E4%B8%BA%EF%BC%9Ahttps-github-com-cglib-cglib"><span class="toc-number">6.0.0.2.10.</span> <span class="toc-text">托管在github，地址为：https:&#x2F;&#x2F;github.com&#x2F;cglib&#x2F;cglib</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CGlib"><span class="toc-number">6.0.0.2.11.</span> <span class="toc-text">CGlib:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E3%80%81%E7%94%B1%E4%BA%8EJDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%98%AF%E9%80%9A%E8%BF%87%E8%A2%AB%E4%BB%A3%E7%90%86%E7%B1%BB%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%9D%A5%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%8F%AA%E8%83%BD%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E4%BA%86"><span class="toc-number">6.0.0.2.12.</span> <span class="toc-text">1 、由于JDK动态代理是通过被代理类实现的接口来创建代理对象的，因此JDK动态代理只能代理实现了</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E7%B1%BB%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%E4%BB%BB%E4%BD%95%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%AF%A5%E5%A6%82%E4%BD%95%E4%BA%A7%E7%94%9F%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%91%A2"><span class="toc-number">6.0.0.2.13.</span> <span class="toc-text">接口的类的对象。如果一个类没有实现任何接口，该如何产生代理对象呢?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E3%80%81CGlib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E6%98%AF%E9%80%9A%E5%8F%A4%E5%93%A6%E5%88%9B%E5%BB%BA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%B1%BB%E7%9A%84%E5%AD%90%E7%B1%BB%E6%9D%A5%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%E4%BB%BB%E4%BD%95%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BB%A3"><span class="toc-number">6.0.0.2.14.</span> <span class="toc-text">2 、CGlib动态代理，是通古哦创建被代理类的子类来创建对象的，因此可以实现没有实现任何接口的代</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%90%86"><span class="toc-number">6.0.0.2.15.</span> <span class="toc-text">理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">6.0.0.2.16.</span> <span class="toc-text">步骤：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0cglib%E4%BE%9D%E8%B5%96"><span class="toc-number">6.0.0.2.17.</span> <span class="toc-text">1. 添加cglib依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B1%BB%EF%BC%8C%E5%AE%9E%E7%8E%B0MethodInterceptor%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%90%8C%E6%97%B6%E5%AE%9E%E7%8E%B0%E5%85%B6%E4%B8%AD%E7%9A%84intercept%E6%96%B9%E6%B3%95%EF%BC%88%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%89"><span class="toc-number">6.0.0.2.18.</span> <span class="toc-text">2. 创建一个类，实现MethodInterceptor接口，同时实现其中的intercept方法（拦截器）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%9C%A8%E7%B1%BB%E4%B8%AD%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAobject%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B9%B6%E6%8F%90%E4%BE%9B%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%8C%E7%94%A8%E4%BA%8E%E4%BC%A0%E9%80%92%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.0.0.2.19.</span> <span class="toc-text">3. 在类中定义一个object对象，并提供有参构造器，用于传递被代理对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%AE%9A%E4%B9%89getProxy%E7%9A%84%E6%96%B9%E6%B3%95%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%98%AF%E9%80%9A%E8%BF%87%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AD%90%E7%B1%BB%E6%9D%A5%E5%88%9B%E5%BB%BA%E7%9A%84%EF%BC%89"><span class="toc-number">6.0.0.2.20.</span> <span class="toc-text">4. 定义getProxy的方法创建代理对象（代理对象是通过创建代理对象的子类来创建的）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%86%8D%E5%88%B0intercept%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91"><span class="toc-number">6.0.0.2.21.</span> <span class="toc-text">5. 再到intercept写自己的业务逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-number">6.0.0.2.21.1.</span> <span class="toc-text">}</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E3%80%81Spring-Aop%E7%9A%84%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2"><span class="toc-number">6.1.</span> <span class="toc-text">5.1、Spring-Aop的框架部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E3%80%81%E7%84%B6%E5%90%8E%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%9F%BA%E4%BA%8Exml"><span class="toc-number">6.2.</span> <span class="toc-text">5.2、然后创建配置文件 基于xml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%9C%A8dao%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 在dao中添加开启事务和提交事务的逻辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AEaop"><span class="toc-number">6.4.</span> <span class="toc-text">5.4在配置文件中配置aop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Aop%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-number">6.4.1.</span> <span class="toc-text">使用Aop的注意事项：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aop%E7%9A%84%E9%80%9A%E7%9F%A5%E7%AD%96%E7%95%A5"><span class="toc-number">6.4.2.</span> <span class="toc-text">Aop的通知策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8aop"><span class="toc-number">6.5.</span> <span class="toc-text">5.5基于注解的方法使用aop</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81Spring%E6%95%B4%E5%90%88Mybatis"><span class="toc-number">7.</span> <span class="toc-text">六、Spring整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%EF%BC%9Aspring-%E5%8F%AF%E4%BB%A5-%E5%AF%B9mybatis-%E6%8F%90%E4%BE%9B%E5%93%AA%E4%BA%9B%E6%94%AF%E6%8C%81%EF%BC%9F"><span class="toc-number">7.1.</span> <span class="toc-text">6.1：spring 可以 对mybatis 提供哪些支持？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1%E3%80%81SpringIoc"><span class="toc-number">7.1.1.</span> <span class="toc-text">6.1.1、SpringIoc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2%E3%80%81SpringAop"><span class="toc-number">7.1.2.</span> <span class="toc-text">6.1.2、SpringAop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E3%80%81Spring%E6%95%B4%E5%90%88Mybatis%E7%9A%84%E5%87%86%E5%A4%87"><span class="toc-number">7.2.</span> <span class="toc-text">6.2、Spring整合Mybatis的准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3Spring%E6%95%B4%E5%90%88Mybatis%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">7.3.</span> <span class="toc-text">6.3Spring整合Mybatis的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-%E6%95%B4%E5%90%88Druid%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">7.3.1.</span> <span class="toc-text">6.3.1 整合Druid连接池</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2%E5%88%9B%E5%BB%BAdb-properties%E6%96%87%E4%BB%B6"><span class="toc-number">7.3.2.</span> <span class="toc-text">6.3.2创建db.properties文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3%E5%9C%A8applicationContext-xml%E4%B8%AD%E9%85%8D%E7%BD%AE%E8%BF%9E%E6%8E%A5%E6%BA%90"><span class="toc-number">7.3.3.</span> <span class="toc-text">6.3.3在applicationContext.xml中配置连接源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-4%E4%BE%9D%E8%B5%96Spring-%E5%AE%B9%E5%99%A8%E6%9D%A5%E8%8E%B7%E5%8F%96SqlSessionFactory%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">7.3.4.</span> <span class="toc-text">6.3.4依赖Spring 容器来获取SqlSessionFactory的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-5-%E6%95%B4%E5%90%88mybatis%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AEmapper"><span class="toc-number">7.3.5.</span> <span class="toc-text">6.3.5 整合mybatis中的配置mapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-6-%E6%95%B4%E5%90%88mybatis%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AEAop%E9%85%8D%E7%BD%AE"><span class="toc-number">7.3.6.</span> <span class="toc-text">6.3.6 整合mybatis中的配置Aop配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-7%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%9A"><span class="toc-number">7.3.7.</span> <span class="toc-text">6.3.7事务的隔离级别：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-8%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B6%EF%BC%9A"><span class="toc-number">7.3.8.</span> <span class="toc-text">6.3.8事务的传播机制：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-9%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84AOP%E9%85%8D%E7%BD%AE"><span class="toc-number">7.3.9.</span> <span class="toc-text">6.3.9基于注解的AOP配置</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">DaiHaojun</div><div class="author-info__description text-center">记录学习日常</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">25</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">36</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">myblog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Spring</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-04-20</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><hr>
<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h5 id="Spring-容器组件，用于完成实例和创建的管理"><a href="#Spring-容器组件，用于完成实例和创建的管理" class="headerlink" title="Spring 容器组件，用于完成实例和创建的管理"></a>Spring 容器组件，用于完成实例和创建的管理</h5><h5 id="1、core"><a href="#1、core" class="headerlink" title="1、core"></a>1、core</h5><h5 id="2-、bean实例管理"><a href="#2-、bean实例管理" class="headerlink" title="2 、bean实例管理"></a>2 、bean实例管理</h5><h5 id="3-、context-容器上下文"><a href="#3-、context-容器上下文" class="headerlink" title="3 、context 容器上下文"></a>3 、context 容器上下文</h5><h1 id="一、Spring概述"><a href="#一、Spring概述" class="headerlink" title="一、Spring概述"></a>一、Spring概述</h1><h5 id="官网：https-spring-io"><a href="#官网：https-spring-io" class="headerlink" title="官网：https://spring.io"></a>官网：<a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io</a></h5><h2 id="Spring架构图："><a href="#Spring架构图：" class="headerlink" title="Spring架构图："></a>Spring架构图：</h2><p><img src="/2022/04/21/Spring/image-20220405144112338.png" alt="image-20220405144112338"></p>
<h2 id="三大组件："><a href="#三大组件：" class="headerlink" title="三大组件："></a>三大组件：</h2><h2 id="1-、核心容器"><a href="#1-、核心容器" class="headerlink" title="1 、核心容器"></a>1 、核心容器</h2><h2 id="2-、Aop、Aspects-（面向切面编程）"><a href="#2-、Aop、Aspects-（面向切面编程）" class="headerlink" title="2 、Aop、Aspects （面向切面编程）"></a>2 、Aop、Aspects （面向切面编程）</h2><h2 id="3-、Web"><a href="#3-、Web" class="headerlink" title="3 、Web"></a>3 、Web</h2><h5 id="Spring-web组件实际是指的是SpringMVC框架，实现web项目的MVC控制"><a href="#Spring-web组件实际是指的是SpringMVC框架，实现web项目的MVC控制" class="headerlink" title="Spring web组件实际是指的是SpringMVC框架，实现web项目的MVC控制"></a>Spring web组件实际是指的是SpringMVC框架，实现web项目的MVC控制</h5><h5 id="web（Spring对web项目的支持）"><a href="#web（Spring对web项目的支持）" class="headerlink" title="web（Spring对web项目的支持）"></a>web（Spring对web项目的支持）</h5><h5 id="webmve（SpringMVC）"><a href="#webmve（SpringMVC）" class="headerlink" title="webmve（SpringMVC）"></a>webmve（SpringMVC）</h5><h2 id="4-、数据访问"><a href="#4-、数据访问" class="headerlink" title="4 、数据访问"></a>4 、数据访问</h2><h5 id="对数据的访问"><a href="#对数据的访问" class="headerlink" title="对数据的访问"></a>对数据的访问</h5><h5 id="Spring数据访问组件，也是基于对JDBC封装"><a href="#Spring数据访问组件，也是基于对JDBC封装" class="headerlink" title="Spring数据访问组件，也是基于对JDBC封装"></a>Spring数据访问组件，也是基于对JDBC封装</h5><h2 id="5-、测试"><a href="#5-、测试" class="headerlink" title="5 、测试"></a>5 、测试</h2><h5 id="Spring的单元测试组件，提供了Spring环境下的单元测试"><a href="#Spring的单元测试组件，提供了Spring环境下的单元测试" class="headerlink" title="Spring的单元测试组件，提供了Spring环境下的单元测试"></a>Spring的单元测试组件，提供了Spring环境下的单元测试</h5><h1 id="二、SpringIOC（控制反转）"><a href="#二、SpringIOC（控制反转）" class="headerlink" title="二、SpringIOC（控制反转）"></a>二、SpringIOC（控制反转）</h1><h3 id="2-1-Spring框架的部署（IOC）"><a href="#2-1-Spring框架的部署（IOC）" class="headerlink" title="2.1 Spring框架的部署（IOC）"></a>2.1 Spring框架的部署（IOC）</h3><h5 id="容器组件，可以完成对象创建和对象的复制，对象的管理"><a href="#容器组件，可以完成对象创建和对象的复制，对象的管理" class="headerlink" title="容器组件，可以完成对象创建和对象的复制，对象的管理"></a>容器组件，可以完成对象创建和对象的复制，对象的管理</h5><h5 id="创建maven项目"><a href="#创建maven项目" class="headerlink" title="创建maven项目"></a>创建maven项目</h5><h5 id="添加SpringIoc依赖"><a href="#添加SpringIoc依赖" class="headerlink" title="添加SpringIoc依赖"></a>添加SpringIoc依赖</h5><h5 id="core"><a href="#core" class="headerlink" title="core"></a>core</h5><h5 id="bean"><a href="#bean" class="headerlink" title="bean"></a>bean</h5><h5 id="context"><a href="#context" class="headerlink" title="context"></a>context</h5><h5 id="context-依赖导入："><a href="#context-依赖导入：" class="headerlink" title="context 依赖导入："></a>context 依赖导入：</h5><p><img src="/2022/04/21/Spring/image-20220405144256308.png" alt="image-20220405144256308"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-</span></span><br><span class="line"><span class="comment">context --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2、Spring的配置文件"><a href="#2-2、Spring的配置文件" class="headerlink" title="2.2、Spring的配置文件"></a>2.2、Spring的配置文件</h3><h5 id="通过配置文件告诉容器创建什么对象，赋什么值"><a href="#通过配置文件告诉容器创建什么对象，赋什么值" class="headerlink" title="通过配置文件告诉容器创建什么对象，赋什么值"></a>通过配置文件告诉容器创建什么对象，赋什么值</h5><h5 id="在resource目录下创建名为-applicationContext-xml"><a href="#在resource目录下创建名为-applicationContext-xml" class="headerlink" title="在resource目录下创建名为 applicationContext.xml"></a>在resource目录下创建名为 applicationContext.xml</h5><h3 id="2-3-SpringIoc使用"><a href="#2-3-SpringIoc使用" class="headerlink" title="2.3 SpringIoc使用"></a>2.3 SpringIoc使用</h3><h5 id="2-3-1：-创建实体类"><a href="#2-3-1：-创建实体类" class="headerlink" title="2.3.1： 创建实体类"></a>2.3.1： 创建实体类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line">&lt;!-- more bean definitions go here --&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line">&lt;!-- ioc配置--&gt;</span><br><span class="line"><span class="keyword">package</span> com.dhj.ioc.bean;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuNum;</span><br><span class="line"><span class="keyword">private</span> String stuName;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line"><span class="keyword">private</span> Date joinTime; <span class="comment">//入学日期</span></span><br><span class="line"><span class="keyword">private</span> String stuGender;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> stuNum, String stuName, <span class="type">int</span> stuAge, Date joinTime, String</span></span><br><span class="line"><span class="params">stuGender)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.stuNum = stuNum;</span><br><span class="line"><span class="built_in">this</span>.stuName = stuName;</span><br><span class="line"><span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line"><span class="built_in">this</span>.joinTime = joinTime;</span><br><span class="line"><span class="built_in">this</span>.stuGender = stuGender;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line"><span class="string">&quot;stuNum=&quot;</span> + stuNum +</span><br><span class="line"><span class="string">&quot;, stuName=&#x27;&quot;</span> + stuName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br></pre></td></tr></table></figure>

<h5 id="2-3-2：使用spring创建实体类的实例对象"><a href="#2-3-2：使用spring创建实体类的实例对象" class="headerlink" title="2.3.2：使用spring创建实体类的实例对象"></a>2.3.2：使用spring创建实体类的实例对象</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;, stuAge=&quot;</span> + stuAge +</span><br><span class="line"><span class="string">&quot;, joinTime=&quot;</span> + joinTime +</span><br><span class="line"><span class="string">&quot;, stuGender=&#x27;&quot;</span> + stuGender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line"><span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuNum</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> stuNum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuNum</span><span class="params">(<span class="type">int</span> stuNum)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.stuNum = stuNum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getStuName</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> stuName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuName</span><span class="params">(String stuName)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.stuName = stuName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuAge</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> stuAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuAge</span><span class="params">(<span class="type">int</span> stuAge)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Date <span class="title function_">getJoinTime</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> joinTime;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJoinTime</span><span class="params">(Date joinTime)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.joinTime = joinTime;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getStuGender</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> stuGender;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuGender</span><span class="params">(String stuGender)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.stuGender = stuGender;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Ioc和DI"><a href="#Ioc和DI" class="headerlink" title="Ioc和DI"></a>Ioc和DI</h3><ul>
<li><p>Ioc 控制反转 ，通过Spring对象工厂 完成对象的创建</p>
</li>
<li><p>DI（Dependency Injectction）依赖注入，在spring完成对象创建的同时依赖spring容器完成对象的赋值</p>
</li>
</ul>
<h3 id="Ioc"><a href="#Ioc" class="headerlink" title="Ioc"></a>Ioc</h3><h5 id="当我们需要通过Spring工厂创建对象的时候，我们要将对象交给bean标签"><a href="#当我们需要通过Spring工厂创建对象的时候，我们要将对象交给bean标签" class="headerlink" title="当我们需要通过Spring工厂创建对象的时候，我们要将对象交给bean标签"></a>当我们需要通过Spring工厂创建对象的时候，我们要将对象交给bean标签</h5><h3 id="DI依赖注入：set注入-能给对象赋值"><a href="#DI依赖注入：set注入-能给对象赋值" class="headerlink" title="DI依赖注入：set注入 (能给对象赋值)"></a>DI依赖注入：set注入 (能给对象赋值)</h3><h5 id="Spring加载配置文件后通过反射创建类的对象，并给属性赋值"><a href="#Spring加载配置文件后通过反射创建类的对象，并给属性赋值" class="headerlink" title="Spring加载配置文件后通过反射创建类的对象，并给属性赋值"></a>Spring加载配置文件后通过反射创建类的对象，并给属性赋值</h5><h5 id="底层是反射"><a href="#底层是反射" class="headerlink" title="底层是反射"></a>底层是反射</h5><h5 id="DI-依赖注入-的三种方式"><a href="#DI-依赖注入-的三种方式" class="headerlink" title="DI(依赖注入)的三种方式"></a><strong>DI(依赖注入)的三种方式</strong></h5><ul>
<li>Spring容器通过 反射 注入有两种方法<ul>
<li>set方法注入 只要你在容器里写了property标签就是调用set方法</li>
<li>构造器注入</li>
<li>接口注入(不常用)</li>
</ul>
</li>
</ul>
<h5 id="简单类型的赋值：直接通过property的属性赋值-name-value"><a href="#简单类型的赋值：直接通过property的属性赋值-name-value" class="headerlink" title="简单类型的赋值：直接通过property的属性赋值 name value"></a>简单类型的赋值：直接通过property的属性赋值 name value</h5><h5 id="例："><a href="#例：" class="headerlink" title="例："></a>例：</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//加载容器，初始化spring容器</span></span><br><span class="line"><span class="type">ClassPathXmlApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">// 通过spring 容器获取stu对象</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) applicationContext.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">System.out.println(student);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;bean class=<span class="string">&quot;java.util.Date&quot;</span> id=<span class="string">&quot;date&quot;</span>/&gt;</span><br><span class="line">&lt;!-- more bean definitions go here --&gt;</span><br><span class="line">&lt;bean id=<span class="string">&quot;student&quot;</span> class=<span class="string">&quot;com.dhj.ioc.bean.Student&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuNum&quot;</span> value=<span class="string">&quot;1002&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuName&quot;</span> value=<span class="string">&quot;张三&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuAge&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuGender&quot;</span> value=<span class="string">&quot;女&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;joinTime&quot;</span> ref=<span class="string">&quot;date&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a>方式一：</h4><h5 id="引用类型的赋值：直接通过property的属性赋值-name-，ref-其中ref是spring容器的对象"><a href="#引用类型的赋值：直接通过property的属性赋值-name-，ref-其中ref是spring容器的对象" class="headerlink" title="引用类型的赋值：直接通过property的属性赋值 name ，ref 其中ref是spring容器的对象"></a>引用类型的赋值：直接通过property的属性赋值 name ，ref 其中ref是spring容器的对象</h5><h5 id="例：日期"><a href="#例：日期" class="headerlink" title="例：日期"></a>例：日期</h5><h4 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h4><h5 id="引用类型的赋值：直接通过property的属性赋值-name-，不要ref标签，然后再到property里面加入一个"><a href="#引用类型的赋值：直接通过property的属性赋值-name-，不要ref标签，然后再到property里面加入一个" class="headerlink" title="引用类型的赋值：直接通过property的属性赋值 name ，不要ref标签，然后再到property里面加入一个"></a>引用类型的赋值：直接通过property的属性赋值 name ，不要ref标签，然后再到property里面加入一个</h5><h5 id="bean标签"><a href="#bean标签" class="headerlink" title="bean标签"></a>bean标签</h5><h4 id="集合类型的赋值"><a href="#集合类型的赋值" class="headerlink" title="集合类型的赋值"></a>集合类型的赋值</h4><h5 id="List："><a href="#List：" class="headerlink" title="List："></a>List：</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;旅游，电影&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/Spring/image-20220405144624235.png" alt="image-20220405144624235"></p>
<h5 id="List：-1"><a href="#List：-1" class="headerlink" title="List："></a>List：</h5><h5 id="List：-2"><a href="#List：-2" class="headerlink" title="List："></a>List：</h5><h5 id="第一种方式"><a href="#第一种方式" class="headerlink" title="第一种方式"></a>第一种方式</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;student&quot;</span> class=<span class="string">&quot;com.dhj.ioc.bean.Student&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuNum&quot;</span> value=<span class="string">&quot;1002&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuName&quot;</span> value=<span class="string">&quot;张三&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuAge&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;stuGender&quot;</span> value=<span class="string">&quot;女&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;joinTime&quot;</span> ref=<span class="string">&quot;date&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;java.util.Date&quot;</span> id=<span class="string">&quot;date&quot;</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;joinTime&quot;</span> ref=<span class="string">&quot;date&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;joinTime&quot;</span>&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;java.util.Date&quot;</span>/&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;旅游，电影&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="第二种方式"><a href="#第二种方式" class="headerlink" title="第二种方式"></a>第二种方式</h5><h5 id="Set跟上面的List一样"><a href="#Set跟上面的List一样" class="headerlink" title="Set跟上面的List一样"></a>Set跟上面的List一样</h5><h5 id="Map："><a href="#Map：" class="headerlink" title="Map："></a>Map：</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;property name=<span class="string">&quot;books&quot;</span> &gt;</span><br><span class="line">&lt;list&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;1&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;月亮与六便士&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;2&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;呐喊&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;/list&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;books&quot;</span> &gt;</span><br><span class="line">&lt;list&gt;</span><br><span class="line">&lt;ref bean=<span class="string">&quot;book1&quot;</span>/&gt; &lt;-- 引用容器中的bean-</span><br><span class="line">book1--&gt;</span><br><span class="line">&lt;ref bean=<span class="string">&quot;book2&quot;</span>/&gt; &lt;-- 引用容器中的bean-</span><br><span class="line">book2--&gt;</span><br><span class="line">&lt;/list&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span> id=<span class="string">&quot;book1&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;月亮与六便士&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span> id=<span class="string">&quot;book2&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;呐喊&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;sets&quot;</span> &gt;</span><br><span class="line">&lt;set&gt;</span><br><span class="line">....</span><br><span class="line">&lt;/set&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;maps&quot;</span>&gt;</span><br><span class="line">&lt;map&gt;</span><br><span class="line">&lt;entry key=<span class="string">&quot;&quot;</span> value=<span class="string">&quot;&quot;</span>/&gt;</span><br><span class="line">&lt;entry key=<span class="string">&quot;&quot;</span> value=<span class="string">&quot;&quot;</span>/&gt;</span><br><span class="line">&lt;entry key=<span class="string">&quot;&quot;</span> value=<span class="string">&quot;&quot;</span>/&gt;</span><br><span class="line">&lt;entry key=<span class="string">&quot;&quot;</span> value=<span class="string">&quot;&quot;</span>/&gt;</span><br><span class="line">&lt;/map&gt;</span><br></pre></td></tr></table></figure>

<h3 id="DI依赖注入：构造器注入-能给对象赋值"><a href="#DI依赖注入：构造器注入-能给对象赋值" class="headerlink" title="DI依赖注入：构造器注入 (能给对象赋值)"></a>DI依赖注入：构造器注入 (能给对象赋值)</h3><h5 id="这个book类没有set方法"><a href="#这个book类没有set方法" class="headerlink" title="这个book类没有set方法"></a>这个book类没有set方法</h5><h5 id="这个用构造器注入注入的时候要-保证自己参数的顺序和构造方法一样"><a href="#这个用构造器注入注入的时候要-保证自己参数的顺序和构造方法一样" class="headerlink" title="这个用构造器注入注入的时候要 保证自己参数的顺序和构造方法一样"></a>这个用构造器注入注入的时候要 保证自己参数的顺序和构造方法一样</h5><h5 id="但是也可以-在标签内加入index属性"><a href="#但是也可以-在标签内加入index属性" class="headerlink" title="但是也可以 在标签内加入index属性"></a>但是也可以 在标签内加入index属性</h5><h3 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h3><h5 id="在Bean标签中可以指定对象的作用域通过scope属性"><a href="#在Bean标签中可以指定对象的作用域通过scope属性" class="headerlink" title="在Bean标签中可以指定对象的作用域通过scope属性"></a>在Bean标签中可以指定对象的作用域通过scope属性</h5><p><img src="/2022/04/21/Spring/image-20220405145131138.png" alt="image-20220405145131138"></p>
<h5 id="通过scope属性改了之后："><a href="#通过scope属性改了之后：" class="headerlink" title="通过scope属性改了之后："></a>通过scope属性改了之后：</h5><p><img src="/2022/04/21/Spring/image-20220405145113866.png" alt="image-20220405145113866"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;java.util.Date&quot;</span> <span class="attr">id</span>=<span class="string">&quot;date&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.ioc.bean.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;111&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;dhj&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;21&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;date&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">map</span> <span class="attr">key-type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value-type</span>=<span class="string">&quot;java.lang.Object&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;map1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dhj很帅&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;map2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dhj很帅&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;map3&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dhj很帅&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">ClassPathXmlApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;ApplicationContext.xml&quot;</span>);</span><br><span class="line"><span class="type">Book</span> <span class="variable">book1</span> <span class="operator">=</span> (Book) applicationContext.getBean(<span class="string">&quot;book&quot;</span>);</span><br><span class="line"><span class="type">Book</span> <span class="variable">book2</span> <span class="operator">=</span> (Book) applicationContext.getBean(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">System.out.println(book1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="scope-x3D-”prototype”-时-为-非单例模式-每通过容器获取对象的时候就会创建一个新的"><a href="#scope-x3D-”prototype”-时-为-非单例模式-每通过容器获取对象的时候就会创建一个新的" class="headerlink" title="scope&#x3D;”prototype” 时 为 非单例模式 每通过容器获取对象的时候就会创建一个新的"></a>scope&#x3D;”prototype” 时 为 非单例模式 每通过容器获取对象的时候就会创建一个新的</h5><h5 id="不写scope默认单例模式-饿汉模式：Spring容器初始化阶段就可以完成对象的创建"><a href="#不写scope默认单例模式-饿汉模式：Spring容器初始化阶段就可以完成对象的创建" class="headerlink" title="不写scope默认单例模式 饿汉模式：Spring容器初始化阶段就可以完成对象的创建"></a>不写scope默认单例模式 饿汉模式：Spring容器初始化阶段就可以完成对象的创建</h5><h5 id="但是也可以用bean标签里的lazy-init属性改为懒汉式"><a href="#但是也可以用bean标签里的lazy-init属性改为懒汉式" class="headerlink" title="但是也可以用bean标签里的lazy-init属性改为懒汉式"></a>但是也可以用bean标签里的lazy-init属性改为懒汉式</h5><h5 id="单例模式："><a href="#单例模式：" class="headerlink" title="单例模式："></a>单例模式：</h5><ul>
<li>懒汉式：</li>
</ul>
<h5 id="对象要用的时候创建"><a href="#对象要用的时候创建" class="headerlink" title="对象要用的时候创建"></a>对象要用的时候创建</h5><ul>
<li>饿汉式：</li>
</ul>
<h5 id="不管你用不用-反正就创建"><a href="#不管你用不用-反正就创建" class="headerlink" title="不管你用不用 反正就创建"></a>不管你用不用 反正就创建</h5><p><img src="/2022/04/21/Spring/image-20220405145148102.png" alt="image-20220405145148102"></p>
<h5 id="默认的都是饿汉的单例模式"><a href="#默认的都是饿汉的单例模式" class="headerlink" title="默认的都是饿汉的单例模式"></a>默认的都是饿汉的单例模式</h5><h3 id="Bean的生命周期方法"><a href="#Bean的生命周期方法" class="headerlink" title="Bean的生命周期方法"></a>Bean的生命周期方法</h3><h5 id="可以在bean标签中通过init-method属性设置获取到对象的时候执行一些init方法-在构造器之后执行，"><a href="#可以在bean标签中通过init-method属性设置获取到对象的时候执行一些init方法-在构造器之后执行，" class="headerlink" title="可以在bean标签中通过init-method属性设置获取到对象的时候执行一些init方法 在构造器之后执行，"></a>可以在bean标签中通过init-method属性设置获取到对象的时候执行一些init方法 在构造器之后执行，</h5><h5 id="destory方法可以指定销毁方法在容器关闭前执行-这些方法必须是在Book（实体）类中"><a href="#destory方法可以指定销毁方法在容器关闭前执行-这些方法必须是在Book（实体）类中" class="headerlink" title="destory方法可以指定销毁方法在容器关闭前执行 这些方法必须是在Book（实体）类中"></a>destory方法可以指定销毁方法在容器关闭前执行 这些方法必须是在Book（实体）类中</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;book&quot;</span> class=<span class="string">&quot;com.dhj.ioc.bean.Book&quot;</span> scope=<span class="string">&quot;prototype&quot;</span> lazy-</span><br><span class="line">init=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="comment">//初始化的方法</span></span><br><span class="line"><span class="comment">// 如果在创建对象的时候需要一些前置操作调用这个</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;创建init！&quot;</span>);</span><br><span class="line">id= <span class="number">1</span> ;</span><br><span class="line">name=<span class="string">&quot;默认值&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自动装配（需要提供set方法）"><a href="#自动装配（需要提供set方法）" class="headerlink" title="自动装配（需要提供set方法）"></a>自动装配（需要提供set方法）</h3><h5 id="别名："><a href="#别名：" class="headerlink" title="别名："></a>别名：</h5><h5 id="autowire-x3D-”byName”："><a href="#autowire-x3D-”byName”：" class="headerlink" title="autowire&#x3D;”byName”："></a>autowire&#x3D;”byName”：</h5><h5 id="Spring在创建对象的时候当前bean的时候从当前容器中获取到匹配实例然后给它赋值"><a href="#Spring在创建对象的时候当前bean的时候从当前容器中获取到匹配实例然后给它赋值" class="headerlink" title="Spring在创建对象的时候当前bean的时候从当前容器中获取到匹配实例然后给它赋值"></a>Spring在创建对象的时候当前bean的时候从当前容器中获取到匹配实例然后给它赋值</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;销毁destory！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Book</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;book来咯！！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">some getterand setter...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">ClassPathXmlApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;ApplicationContext.xml&quot;</span>);</span><br><span class="line"><span class="type">Book</span> <span class="variable">book1</span> <span class="operator">=</span> (Book) applicationContext.getBean(<span class="string">&quot;book&quot;</span>);</span><br><span class="line"><span class="type">Book</span> <span class="variable">book2</span> <span class="operator">=</span> (Book) applicationContext.getBean(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">System.out.println(book1);</span><br><span class="line">System.out.println(book2);</span><br><span class="line">&#125;</span><br><span class="line">&lt;bean id=<span class="string">&quot;clazz&quot;</span> class=<span class="string">&quot;com.dhj.ioc.bean.Clazz&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;计科一班&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.dhj.ioc.bean.Student&quot;</span> id=<span class="string">&quot;student2&quot;</span> autowire=<span class="string">&quot;byName&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="此时获取的student对象有clazz属性自动装配"><a href="#此时获取的student对象有clazz属性自动装配" class="headerlink" title="此时获取的student对象有clazz属性自动装配"></a>此时获取的student对象有clazz属性自动装配</h5><h5 id="按类型："><a href="#按类型：" class="headerlink" title="按类型："></a>按类型：</h5><h5 id="autowire-x3D-”byType”："><a href="#autowire-x3D-”byType”：" class="headerlink" title="autowire&#x3D;”byType”："></a>autowire&#x3D;”byType”：</h5><h5 id="通过类的类型来寻找匹配的bean"><a href="#通过类的类型来寻找匹配的bean" class="headerlink" title="通过类的类型来寻找匹配的bean"></a>通过类的类型来寻找匹配的bean</h5><h1 id="三、Spring基于注解的配置"><a href="#三、Spring基于注解的配置" class="headerlink" title="三、Spring基于注解的配置"></a>三、Spring基于注解的配置</h1><p><img src="/2022/04/21/Spring/image-20220405145219003.png" alt="image-20220405145219003"></p>
<h5 id="直接在实体类中添加注解申明交给spring容器管理，以简化开发步骤"><a href="#直接在实体类中添加注解申明交给spring容器管理，以简化开发步骤" class="headerlink" title="直接在实体类中添加注解申明交给spring容器管理，以简化开发步骤"></a>直接在实体类中添加注解申明交给spring容器管理，以简化开发步骤</h5><h4 id="1-、创建maven依赖"><a href="#1-、创建maven依赖" class="headerlink" title="1 、创建maven依赖"></a>1 、创建maven依赖</h4><h4 id="2-、添加springioc依赖"><a href="#2-、添加springioc依赖" class="headerlink" title="2 、添加springioc依赖"></a>2 、添加springioc依赖</h4><h4 id="3-、创建弹簧配置文件"><a href="#3-、创建弹簧配置文件" class="headerlink" title="3 、创建弹簧配置文件"></a>3 、创建弹簧配置文件</h4><h5 id="因为Spring容器初始化的时候，指挥家在applicationContext-xml文件，所以我们在实体类中添加"><a href="#因为Spring容器初始化的时候，指挥家在applicationContext-xml文件，所以我们在实体类中添加" class="headerlink" title="因为Spring容器初始化的时候，指挥家在applicationContext.xml文件，所以我们在实体类中添加"></a>因为Spring容器初始化的时候，指挥家在applicationContext.xml文件，所以我们在实体类中添加</h5><h5 id="的注解就不会被Spring扫描，所以我们需要在这个文件中声明Spring文件-的扫描范围"><a href="#的注解就不会被Spring扫描，所以我们需要在这个文件中声明Spring文件-的扫描范围" class="headerlink" title="的注解就不会被Spring扫描，所以我们需要在这个文件中声明Spring文件 的扫描范围"></a>的注解就不会被Spring扫描，所以我们需要在这个文件中声明Spring文件 的扫描范围</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context/&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--声明使用注解配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 声明spring工厂注解扫描的范围--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.dhj.bean&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="四、ioc常见的注解有哪些"><a href="#四、ioc常见的注解有哪些" class="headerlink" title="四、ioc常见的注解有哪些"></a>四、ioc常见的注解有哪些</h1><h4 id="如何将我们的实体类交给spring管理？"><a href="#如何将我们的实体类交给spring管理？" class="headerlink" title="如何将我们的实体类交给spring管理？"></a>如何将我们的实体类交给spring管理？</h4><h5 id="只需要在类上面声明一个-Component-value-可省"><a href="#只需要在类上面声明一个-Component-value-可省" class="headerlink" title="只需要在类上面声明一个 @Component value 可省"></a>只需要在类上面声明一个 @Component value 可省</h5><h4 id="component"><a href="#component" class="headerlink" title="@component"></a>@component</h4><h5 id="类注解，声明此类被spring容器管理相当于bean标签的作用"><a href="#类注解，声明此类被spring容器管理相当于bean标签的作用" class="headerlink" title="类注解，声明此类被spring容器管理相当于bean标签的作用"></a>类注解，声明此类被spring容器管理相当于bean标签的作用</h5><h5 id="可以在后面写上value-x3D-”xxx”相当于bean的id属性-value可省略-如果省略不写，默认是当前类名改"><a href="#可以在后面写上value-x3D-”xxx”相当于bean的id属性-value可省略-如果省略不写，默认是当前类名改" class="headerlink" title="可以在后面写上value&#x3D;”xxx”相当于bean的id属性 value可省略 如果省略不写，默认是当前类名改"></a>可以在后面写上value&#x3D;”xxx”相当于bean的id属性 value可省略 如果省略不写，默认是当前类名改</h5><h5 id="小写"><a href="#小写" class="headerlink" title="小写"></a>小写</h5><h4 id="Service"><a href="#Service" class="headerlink" title="@Service"></a>@Service</h4><h4 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h4><h4 id="Responsitory"><a href="#Responsitory" class="headerlink" title="@Responsitory"></a>@Responsitory</h4><h5 id="下面这三个也可以交给spring容器管理他们主要是语义上的区别"><a href="#下面这三个也可以交给spring容器管理他们主要是语义上的区别" class="headerlink" title="下面这三个也可以交给spring容器管理他们主要是语义上的区别"></a>下面这三个也可以交给spring容器管理他们主要是语义上的区别</h5><h5 id="Controller-注解主要声明将控制器类交给spring-管理-例如servlet"><a href="#Controller-注解主要声明将控制器类交给spring-管理-例如servlet" class="headerlink" title="@Controller 注解主要声明将控制器类交给spring 管理 例如servlet"></a>@Controller 注解主要声明将控制器类交给spring 管理 例如servlet</h5><h5 id="Service注解主要声明业务处理类，主要是指Service接口实现类"><a href="#Service注解主要声明业务处理类，主要是指Service接口实现类" class="headerlink" title="@Service注解主要声明业务处理类，主要是指Service接口实现类"></a>@Service注解主要声明业务处理类，主要是指Service接口实现类</h5><h5 id="Responsitory注解主要声明持久化管理交给spring管理例如dao接口"><a href="#Responsitory注解主要声明持久化管理交给spring管理例如dao接口" class="headerlink" title="@Responsitory注解主要声明持久化管理交给spring管理例如dao接口"></a>@Responsitory注解主要声明持久化管理交给spring管理例如dao接口</h5><h5 id="component注解除了service-，dao，controller其他都用-component"><a href="#component注解除了service-，dao，controller其他都用-component" class="headerlink" title="@component注解除了service ，dao，controller其他都用@component"></a>@component注解除了service ，dao，controller其他都用@component</h5><h4 id="Scope-value-x3D-”singleton”-或者-Scope-value-x3D-”prototype”"><a href="#Scope-value-x3D-”singleton”-或者-Scope-value-x3D-”prototype”" class="headerlink" title="@Scope(value&#x3D;”singleton”)或者@Scope(value&#x3D;”prototype”)"></a>@Scope(value&#x3D;”singleton”)或者@Scope(value&#x3D;”prototype”)</h4><h5 id="声明当前类为单例模式还是非单例模式-默认是单例模式-value可省"><a href="#声明当前类为单例模式还是非单例模式-默认是单例模式-value可省" class="headerlink" title="声明当前类为单例模式还是非单例模式 默认是单例模式 value可省"></a>声明当前类为单例模式还是非单例模式 默认是单例模式 value可省</h5><h4 id="Lazy"><a href="#Lazy" class="headerlink" title="@Lazy"></a>@Lazy</h4><h5 id="不设置或者设置为false-这表示饿汉模式-有多少创建多少"><a href="#不设置或者设置为false-这表示饿汉模式-有多少创建多少" class="headerlink" title="不设置或者设置为false 这表示饿汉模式(有多少创建多少)"></a>不设置或者设置为false 这表示饿汉模式(有多少创建多少)</h5><h5 id="类注解"><a href="#类注解" class="headerlink" title="类注解"></a>类注解</h5><h5 id="用于声明一个单例模式的bean是否为懒汉模式"><a href="#用于声明一个单例模式的bean是否为懒汉模式" class="headerlink" title="用于声明一个单例模式的bean是否为懒汉模式"></a>用于声明一个单例模式的bean是否为懒汉模式</h5><h4 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h4><h5 id="方法注解，声明一个方法为当前类的初始化方"><a href="#方法注解，声明一个方法为当前类的初始化方" class="headerlink" title="方法注解，声明一个方法为当前类的初始化方"></a>方法注解，声明一个方法为当前类的初始化方</h5><h5 id="相当于bean标签的init-method属性"><a href="#相当于bean标签的init-method属性" class="headerlink" title="相当于bean标签的init-method属性"></a>相当于bean标签的init-method属性</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;stu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuNum;</span><br><span class="line"><span class="keyword">private</span> String stuName;</span><br><span class="line"><span class="keyword">private</span> String Gender;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line"><span class="keyword">private</span> Date joinTime;</span><br><span class="line">some getter and setter...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="PreDestroy"><a href="#PreDestroy" class="headerlink" title="@PreDestroy"></a>@PreDestroy</h4><h5 id="方法注解，声明一个方法为当前类的销毁方法"><a href="#方法注解，声明一个方法为当前类的销毁方法" class="headerlink" title="方法注解，声明一个方法为当前类的销毁方法"></a>方法注解，声明一个方法为当前类的销毁方法</h5><h5 id="相当于bean标签的destory-method方法"><a href="#相当于bean标签的destory-method方法" class="headerlink" title="相当于bean标签的destory-method方法"></a>相当于bean标签的destory-method方法</h5><h4 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h4><h5 id="默认是根据类型装配的ByType，如果没有找到与默认类型匹配的bean就会抛出异常"><a href="#默认是根据类型装配的ByType，如果没有找到与默认类型匹配的bean就会抛出异常" class="headerlink" title="默认是根据类型装配的ByType，如果没有找到与默认类型匹配的bean就会抛出异常"></a>默认是根据类型装配的ByType，如果没有找到与默认类型匹配的bean就会抛出异常</h5><h5 id="属性注解，方法注解set方法，声明当前属性自动装配"><a href="#属性注解，方法注解set方法，声明当前属性自动装配" class="headerlink" title="属性注解，方法注解set方法，声明当前属性自动装配"></a>属性注解，方法注解set方法，声明当前属性自动装配</h5><h5 id="有属性requird-默认是ture-设置是否自动装配为必须的-，设置为false-为非必须，就不会自动装配"><a href="#有属性requird-默认是ture-设置是否自动装配为必须的-，设置为false-为非必须，就不会自动装配" class="headerlink" title="有属性requird 默认是ture 设置是否自动装配为必须的 ，设置为false 为非必须，就不会自动装配"></a>有属性requird 默认是ture 设置是否自动装配为必须的 ，设置为false 为非必须，就不会自动装配</h5><h4 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h4><h5 id="意思就是在spring容器中找到名字为c的bean赋值给我"><a href="#意思就是在spring容器中找到名字为c的bean赋值给我" class="headerlink" title="意思就是在spring容器中找到名字为c的bean赋值给我"></a>意思就是在spring容器中找到名字为c的bean赋值给我</h5><h5 id="通过名字来找bean"><a href="#通过名字来找bean" class="headerlink" title="通过名字来找bean"></a>通过名字来找bean</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostConstruct</span><span class="comment">//构造器之后相当于init-method属性</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;init执行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@PreDestroy</span> <span class="comment">//销毁之前的 相当于bean标签的destory-method方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;destory执行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuNum;</span><br><span class="line"><span class="keyword">private</span> String stuName;</span><br><span class="line"><span class="keyword">private</span> String Gender;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line"><span class="keyword">private</span> Date joinTime;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Clazz clazz;</span><br><span class="line">...</span><br><span class="line">some getter and setter...</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setClazz</span><span class="params">(<span class="meta">@Qualifier(&quot;c&quot;)</span> Clazz clazz)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.clazz = clazz;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h4><h5 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h5><h5 id="默认是byName找到name相同的直接赋值，找不到就byType-没找到就报错，找到不止一个bean"><a href="#默认是byName找到name相同的直接赋值，找不到就byType-没找到就报错，找到不止一个bean" class="headerlink" title="默认是byName找到name相同的直接赋值，找不到就byType ,没找到就报错，找到不止一个bean"></a>默认是byName找到name相同的直接赋值，找不到就byType ,没找到就报错，找到不止一个bean</h5><h5 id="匹配也会抛出异常"><a href="#匹配也会抛出异常" class="headerlink" title="匹配也会抛出异常"></a>匹配也会抛出异常</h5><h5 id="有属性shareable-x3D-false-shareable"><a href="#有属性shareable-x3D-false-shareable" class="headerlink" title="有属性shareable&#x3D;false shareable"></a>有属性shareable&#x3D;false shareable</h5><h5 id="指示此组件和其他组件之间是否可以共享该资源。这可以指定代表任何支持类型的连接工厂的资"><a href="#指示此组件和其他组件之间是否可以共享该资源。这可以指定代表任何支持类型的连接工厂的资" class="headerlink" title="指示此组件和其他组件之间是否可以共享该资源。这可以指定代表任何支持类型的连接工厂的资"></a>指示此组件和其他组件之间是否可以共享该资源。这可以指定代表任何支持类型的连接工厂的资</h5><h5 id="源，并且不能为其他类型的资源指定。它是一个布尔型，默认是true"><a href="#源，并且不能为其他类型的资源指定。它是一个布尔型，默认是true" class="headerlink" title="源，并且不能为其他类型的资源指定。它是一个布尔型，默认是true"></a>源，并且不能为其他类型的资源指定。它是一个布尔型，默认是true</h5><h5 id="属性注解"><a href="#属性注解" class="headerlink" title="属性注解"></a>属性注解</h5><h1 id="五、代理设计模式"><a href="#五、代理设计模式" class="headerlink" title="五、代理设计模式"></a>五、代理设计模式</h1><p><img src="/2022/04/21/Spring/image-20220405145238379.png" alt="image-20220405145238379"></p>
<h5 id="在一个general接口里面有三个方法"><a href="#在一个general接口里面有三个方法" class="headerlink" title="在一个general接口里面有三个方法"></a>在一个general接口里面有三个方法</h5><p><img src="/2022/04/21/Spring/image-20220405145256617.png" alt="image-20220405145256617"></p>
<h5 id="然后在创建两个接口实现类实现了GeneralDao接口"><a href="#然后在创建两个接口实现类实现了GeneralDao接口" class="headerlink" title="然后在创建两个接口实现类实现了GeneralDao接口"></a>然后在创建两个接口实现类实现了GeneralDao接口</h5><h5 id="然后再创建一个MyStaticProxy类里面有一个有参构造方法"><a href="#然后再创建一个MyStaticProxy类里面有一个有参构造方法" class="headerlink" title="然后再创建一个MyStaticProxy类里面有一个有参构造方法"></a>然后再创建一个MyStaticProxy类里面有一个有参构造方法</h5><h5 id="测试类："><a href="#测试类：" class="headerlink" title="测试类："></a>测试类：</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyStaticProxy</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyStaticProxy</span><span class="params">(GeneralDao generalDao)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.generalDao = generalDao;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> GeneralDao generalDao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">begin();</span><br><span class="line">generalDao.insert();</span><br><span class="line">commit();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">begin();</span><br><span class="line">generalDao.delete();</span><br><span class="line">commit();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">begin();</span><br><span class="line">generalDao.update();</span><br><span class="line">commit();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;begin-开启事务&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;end-关闭事务&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/Spring/image-20220405145316873.png" alt="image-20220405145316873"></p>
<h4 id="使用代理的好处"><a href="#使用代理的好处" class="headerlink" title="使用代理的好处"></a>使用代理的好处</h4><h5 id="1-、被代理类中只用关注核心业务的实现，将通用的管理型逻辑（事务管理、日志管理）和业务逻辑分离"><a href="#1-、被代理类中只用关注核心业务的实现，将通用的管理型逻辑（事务管理、日志管理）和业务逻辑分离" class="headerlink" title="1 、被代理类中只用关注核心业务的实现，将通用的管理型逻辑（事务管理、日志管理）和业务逻辑分离"></a>1 、被代理类中只用关注核心业务的实现，将通用的管理型逻辑（事务管理、日志管理）和业务逻辑分离</h5><h5 id="2-、将通用的代码放在代理类中实现，提供了代码的复用性"><a href="#2-、将通用的代码放在代理类中实现，提供了代码的复用性" class="headerlink" title="2 、将通用的代码放在代理类中实现，提供了代码的复用性"></a>2 、将通用的代码放在代理类中实现，提供了代码的复用性</h5><h5 id="3-、通过在代理类添加业务逻辑，实现对原有业务逻辑的展（增强"><a href="#3-、通过在代理类添加业务逻辑，实现对原有业务逻辑的展（增强" class="headerlink" title="3 、通过在代理类添加业务逻辑，实现对原有业务逻辑的展（增强)"></a>3 、通过在代理类添加业务逻辑，实现对原有业务逻辑的展（增强)</h5><h4 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h4><h5 id="几乎可以为所有类产生代理所有的对象"><a href="#几乎可以为所有类产生代理所有的对象" class="headerlink" title="几乎可以为所有类产生代理所有的对象"></a>几乎可以为所有类产生代理所有的对象</h5><h5 id="java中实现动态代理的方式有两种："><a href="#java中实现动态代理的方式有两种：" class="headerlink" title="java中实现动态代理的方式有两种："></a>java中实现动态代理的方式有两种：</h5><h5 id="jdk动态代理"><a href="#jdk动态代理" class="headerlink" title="jdk动态代理"></a>jdk动态代理</h5><h5 id="CGlib动态代理"><a href="#CGlib动态代理" class="headerlink" title="CGlib动态代理"></a>CGlib动态代理</h5><h5 id="CGlib动态代理不能为final类创建代理对象"><a href="#CGlib动态代理不能为final类创建代理对象" class="headerlink" title="CGlib动态代理不能为final类创建代理对象"></a>CGlib动态代理不能为final类创建代理对象</h5><h5 id="JDK动态代理："><a href="#JDK动态代理：" class="headerlink" title="JDK动态代理："></a>JDK动态代理：</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">BookDaoImpl</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line"><span class="type">StudentDaoImpl</span> <span class="variable">studentDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentDaoImpl</span>();</span><br><span class="line"><span class="type">MyStaticProxy</span> <span class="variable">proxy1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyStaticProxy</span>(bookDao);</span><br><span class="line"><span class="type">MyStaticProxy</span> <span class="variable">proxy2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyStaticProxy</span>(studentDao);</span><br><span class="line">proxy1.insert();</span><br><span class="line">proxy2.insert();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.dhj.dao;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKDynamicProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"><span class="keyword">private</span> Object obj ;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">JDKDynamicProxy</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.obj = obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- 获取代理对象的放法</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="comment">//获取被代理对象的类加载器 ，第一个参数</span></span><br><span class="line">  <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> obj.getClass().getClassLoader();</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二个参数，获取被代理对象的接口</span></span><br><span class="line">Class&lt;?&gt;[] interfaces = obj.getClass().getInterfaces();</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三个参数使用代理对象调用放法时产生的拦截器</span></span><br><span class="line">proxy = Proxy.newProxyInstance(classLoader,interfaces,<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> proxy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span></span><br><span class="line">Throwable &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;来咯哦&quot;</span>);</span><br><span class="line">begin();</span><br><span class="line"><span class="type">Object</span> <span class="variable">invoke</span> <span class="operator">=</span> method.invoke(obj);</span><br><span class="line">commit();</span><br><span class="line"><span class="keyword">return</span> invoke;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;开启事务&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;提交事务&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dhj.dao.GeneralDao;</span><br><span class="line"><span class="keyword">import</span> com.dhj.dao.JDKDynamicProxy;</span><br><span class="line"><span class="keyword">import</span> com.dhj.dao.impl.BookDaoImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKDynamicProxyTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//被代理对象</span></span><br><span class="line"><span class="type">BookDaoImpl</span> <span class="variable">dao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// proxy就是产生的代理对象:可以强转成被代理对象实现的接口类型</span></span><br><span class="line"><span class="type">GeneralDao</span> <span class="variable">proxy</span> <span class="operator">=</span> (GeneralDao) <span class="keyword">new</span> <span class="title class_">JDKDynamicProxy</span>(dao).getProxy();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用的方法作为一个参数传递给了invoke</span></span><br></pre></td></tr></table></figure>



<h5 id="CGLIB是一个强大的、高性能的代码生成库。其被广泛应用于AOP框架（Spring、dynaop）中，"><a href="#CGLIB是一个强大的、高性能的代码生成库。其被广泛应用于AOP框架（Spring、dynaop）中，" class="headerlink" title="CGLIB是一个强大的、高性能的代码生成库。其被广泛应用于AOP框架（Spring、dynaop）中，"></a>CGLIB是一个强大的、高性能的代码生成库。其被广泛应用于AOP框架（Spring、dynaop）中，</h5><h5 id="用以提供方法拦截操作。Hibernate作为一个比较受欢迎的ORM框架，同样使用CGLIB来代理单端"><a href="#用以提供方法拦截操作。Hibernate作为一个比较受欢迎的ORM框架，同样使用CGLIB来代理单端" class="headerlink" title="用以提供方法拦截操作。Hibernate作为一个比较受欢迎的ORM框架，同样使用CGLIB来代理单端"></a>用以提供方法拦截操作。Hibernate作为一个比较受欢迎的ORM框架，同样使用CGLIB来代理单端</h5><h5 id="（多对一和一对一）关联（延迟提取集合使用的另一种机制）。CGLIB作为一个开源项目，其代码"><a href="#（多对一和一对一）关联（延迟提取集合使用的另一种机制）。CGLIB作为一个开源项目，其代码" class="headerlink" title="（多对一和一对一）关联（延迟提取集合使用的另一种机制）。CGLIB作为一个开源项目，其代码"></a>（多对一和一对一）关联（延迟提取集合使用的另一种机制）。CGLIB作为一个开源项目，其代码</h5><h5 id="托管在github，地址为：https-github-com-cglib-cglib"><a href="#托管在github，地址为：https-github-com-cglib-cglib" class="headerlink" title="托管在github，地址为：https://github.com/cglib/cglib"></a>托管在github，地址为：<a target="_blank" rel="noopener" href="https://github.com/cglib/cglib">https://github.com/cglib/cglib</a></h5><h5 id="CGlib"><a href="#CGlib" class="headerlink" title="CGlib:"></a>CGlib:</h5><h5 id="1-、由于JDK动态代理是通过被代理类实现的接口来创建代理对象的，因此JDK动态代理只能代理实现了"><a href="#1-、由于JDK动态代理是通过被代理类实现的接口来创建代理对象的，因此JDK动态代理只能代理实现了" class="headerlink" title="1 、由于JDK动态代理是通过被代理类实现的接口来创建代理对象的，因此JDK动态代理只能代理实现了"></a>1 、由于JDK动态代理是通过被代理类实现的接口来创建代理对象的，因此JDK动态代理只能代理实现了</h5><h5 id="接口的类的对象。如果一个类没有实现任何接口，该如何产生代理对象呢"><a href="#接口的类的对象。如果一个类没有实现任何接口，该如何产生代理对象呢" class="headerlink" title="接口的类的对象。如果一个类没有实现任何接口，该如何产生代理对象呢?"></a>接口的类的对象。如果一个类没有实现任何接口，该如何产生代理对象呢?</h5><h5 id="2-、CGlib动态代理，是通古哦创建被代理类的子类来创建对象的，因此可以实现没有实现任何接口的代"><a href="#2-、CGlib动态代理，是通古哦创建被代理类的子类来创建对象的，因此可以实现没有实现任何接口的代" class="headerlink" title="2 、CGlib动态代理，是通古哦创建被代理类的子类来创建对象的，因此可以实现没有实现任何接口的代"></a>2 、CGlib动态代理，是通古哦创建被代理类的子类来创建对象的，因此可以实现没有实现任何接口的代</h5><h5 id="理"><a href="#理" class="headerlink" title="理"></a>理</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">proxy.delete();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- CGlib的依赖--&gt;</span><br><span class="line">&lt;!-- https:<span class="comment">//mvnrepository.com/artifact/cglib/cglib --&gt;</span></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;cglib&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;cglib&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;<span class="number">3.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CGlibDynamicProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"><span class="keyword">private</span> Object object;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">CGlibDynamicProxy</span><span class="params">(Object object)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.object = object;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">enhancer.setSuperclass(object.getClass());</span><br><span class="line">enhancer.setCallback(<span class="built_in">this</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">proxy</span> <span class="operator">=</span> enhancer.create();</span><br><span class="line"><span class="keyword">return</span> proxy;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//传进来的方法 method object[] 是代表 方法里 的 方法里 的参数</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects,</span></span><br><span class="line"><span class="params">MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">begin();</span><br><span class="line"><span class="type">Object</span> <span class="variable">invoke</span> <span class="operator">=</span> method.invoke(object,objects);</span><br><span class="line">commit();</span><br><span class="line"><span class="keyword">return</span> invoke;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;开启事务&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;提交事务&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h5><h5 id="1-添加cglib依赖"><a href="#1-添加cglib依赖" class="headerlink" title="1. 添加cglib依赖"></a>1. 添加cglib依赖</h5><h5 id="2-创建一个类，实现MethodInterceptor接口，同时实现其中的intercept方法（拦截器）"><a href="#2-创建一个类，实现MethodInterceptor接口，同时实现其中的intercept方法（拦截器）" class="headerlink" title="2. 创建一个类，实现MethodInterceptor接口，同时实现其中的intercept方法（拦截器）"></a>2. 创建一个类，实现MethodInterceptor接口，同时实现其中的intercept方法（拦截器）</h5><h5 id="3-在类中定义一个object对象，并提供有参构造器，用于传递被代理对象"><a href="#3-在类中定义一个object对象，并提供有参构造器，用于传递被代理对象" class="headerlink" title="3. 在类中定义一个object对象，并提供有参构造器，用于传递被代理对象"></a>3. 在类中定义一个object对象，并提供有参构造器，用于传递被代理对象</h5><h5 id="4-定义getProxy的方法创建代理对象（代理对象是通过创建代理对象的子类来创建的）"><a href="#4-定义getProxy的方法创建代理对象（代理对象是通过创建代理对象的子类来创建的）" class="headerlink" title="4. 定义getProxy的方法创建代理对象（代理对象是通过创建代理对象的子类来创建的）"></a>4. 定义getProxy的方法创建代理对象（代理对象是通过创建代理对象的子类来创建的）</h5><h5 id="5-再到intercept写自己的业务逻辑"><a href="#5-再到intercept写自己的业务逻辑" class="headerlink" title="5. 再到intercept写自己的业务逻辑"></a>5. 再到intercept写自己的业务逻辑</h5><h6 id><a href="#" class="headerlink" title="}"></a>}</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BookDaoImpl</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line"><span class="comment">//创建代理对象</span></span><br><span class="line"><span class="type">CGlibDynamicProxy</span> <span class="variable">cGlibDynamicProxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CGlibDynamicProxy</span>(bookDao);</span><br><span class="line"><span class="comment">//代理对象实际上是被代理对象的子类，直接强转为被代理类类型</span></span><br><span class="line"><span class="type">BookDaoImpl</span> <span class="variable">proxy</span> <span class="operator">=</span> (BookDaoImpl) cGlibDynamicProxy.getProxy();</span><br><span class="line"><span class="comment">/*使用代理对象执行这个insert方法 实际上没有调用跟这个方法而是掉头用了intercept方法</span></span><br><span class="line"><span class="comment">而是参数传递给了intercept 然后通过反射调用的*/</span></span><br><span class="line">proxy.insert();</span><br></pre></td></tr></table></figure>







<p><img src="/2022/04/21/Spring/image-20220407000257146.png" alt="image-20220407000257146"></p>
<h2 id="5-1、Spring-Aop的框架部署"><a href="#5-1、Spring-Aop的框架部署" class="headerlink" title="5.1、Spring-Aop的框架部署"></a>5.1、Spring-Aop的框架部署</h2><p>1、</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果要aop的使用得导入依赖 </p>
<h2 id="5-2、然后创建配置文件-基于xml"><a href="#5-2、然后创建配置文件-基于xml" class="headerlink" title="5.2、然后创建配置文件 基于xml"></a>5.2、然后创建配置文件 基于xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-3-在dao中添加开启事务和提交事务的逻辑"><a href="#5-3-在dao中添加开启事务和提交事务的逻辑" class="headerlink" title="5.3 在dao中添加开启事务和提交事务的逻辑"></a>5.3 在dao中添加开启事务和提交事务的逻辑</h2><p>新定义一个类</p>
<p>配置切面的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxManager</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;开启事务&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;提交事务&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-4在配置文件中配置aop"><a href="#5-4在配置文件中配置aop" class="headerlink" title="5.4在配置文件中配置aop"></a>5.4在配置文件中配置aop</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;TxManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.util.TxManager&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        声明切入点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;bookUpdate&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.dhj.dao.impl.BookDaoImpl.update())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        声明TxManager为切面类--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;TxManager&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        通知--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;begin&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookUpdate&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--        通知--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;commit&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookUpdate&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        通知--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用Aop的注意事项："><a href="#使用Aop的注意事项：" class="headerlink" title="使用Aop的注意事项："></a>使用Aop的注意事项：</h3><ul>
<li>如果要使Spring aop 面向切面编程，调用切入点方法的对象必须通过Spring容器获取</li>
<li>如果一个类中的方法被声明为切入点之后，通过Spring容器获取该类对象，实则获取到的是一个代理对象</li>
<li>如果一个类中的方法没有被声明为切入点，通过spring容器获取的就是这个类真实创建的对象</li>
</ul>
<h3 id="Aop的通知策略"><a href="#Aop的通知策略" class="headerlink" title="Aop的通知策略"></a>Aop的通知策略</h3><p>就是将切面类中的切点方法，如何植入到连接点</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dhj.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method4&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> Object <span class="title function_">method5</span><span class="params">(ProceedingJoinPoint point)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method5--before&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> point.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------method5--after&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;MyAspect&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.dhj.util.MyAspect&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;bookInsert&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.dhj.dao.impl.BookDaoImpl.insert(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;MyAspect&quot;</span>&gt;</span></span><br><span class="line">    &lt;-- 第一种 --&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;method1&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookInsert&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">&lt;-- 第二种 --&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;method2&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookInsert&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    &lt;-- 第三种  在抛出异常之后 --&gt;</span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;method3&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookInsert&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">        &lt;-- 第四种  方法返回之后 --&gt;</span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;method4&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookInsert&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--  第五种 环绕通知 它的切点方法必须遵循一下规则：1此方法必须带参数而且必须是spirng戴的类型，2必须有返回值，3在前后业务的逻辑之间执行 point.proceed();--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;method5&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;bookInsert&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/Spring/image-20220407232035743.png" alt="image-20220407232035743"></p>
<h2 id="5-5基于注解的方法使用aop"><a href="#5-5基于注解的方法使用aop" class="headerlink" title="5.5基于注解的方法使用aop"></a>5.5基于注解的方法使用aop</h2><ul>
<li><p>第一步：在你需要增强的代码交给spring 容器管理</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@Component(“userDaoImpl”)<br>public class UserDaoImpl {<br>public UserDaoImpl() {<br>}<br><br><br>public void insertUser() {<br>    System.out.println(“insert User—“);<br>}<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">* 第二步：将你要实现的业务单独写成一个类在里面写方法,并且将它定义为切面类（@Aspect），也同样要交给spring管理（@Component） </span><br><span class="line"></span><br><span class="line">* </span><br><span class="line"></span><br><span class="line">* ```java</span><br><span class="line">  package com.dhj.util;</span><br><span class="line">  </span><br><span class="line">  import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">  import org.aspectj.lang.annotation.*;</span><br><span class="line">  import org.springframework.stereotype.Component;</span><br><span class="line">  </span><br><span class="line">  import java.util.Date;</span><br><span class="line">  @Component</span><br><span class="line">  @Aspect</span><br><span class="line">  public class TxManager &#123;</span><br><span class="line">      @Pointcut(&quot;execution(* com.dhj.dao.*.*(..))&quot;)</span><br><span class="line">      public void pc1()&#123;</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">      @Before(&quot;pc1()&quot;)</span><br><span class="line">      public void begin()&#123;</span><br><span class="line">          System.out.println(new Date());</span><br><span class="line">          System.out.println(&quot;begin&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      @After(&quot;pc1()&quot;)</span><br><span class="line">      public void commit()&#123;</span><br><span class="line">  </span><br><span class="line">          System.out.println(&quot;commit&quot;);</span><br><span class="line">          System.out.println(new Date());</span><br><span class="line">      &#125;</span><br><span class="line">  @Around(&quot;pc1()&quot;)</span><br><span class="line">      public Object printTime(ProceedingJoinPoint point) throws Throwable &#123;</span><br><span class="line">          long time1= System.currentTimeMillis();</span><br><span class="line">          Object proceed = point.proceed();</span><br><span class="line">          long time2= System.currentTimeMillis();</span><br><span class="line">          System.out.println(time2-time1+&quot;ms&quot;);</span><br><span class="line">          return proceed;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li>
</ul>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserDaoImpl</span> <span class="variable">userDaoImpl</span> <span class="operator">=</span> (UserDaoImpl) context.getBean(<span class="string">&quot;userDaoImpl&quot;</span>);</span><br><span class="line">        userDaoImpl.insertUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2022/04/21/Spring/image-20220408212839476.png" alt="image-20220408212839476"></p>
<p><strong>注意事项：注解虽然方便但是只能在源码上添加注解，如果使用到第三方提供的类则需要通过xml完成配置</strong></p>
<h1 id="六、Spring整合Mybatis"><a href="#六、Spring整合Mybatis" class="headerlink" title="六、Spring整合Mybatis"></a>六、Spring整合Mybatis</h1><p>Spring两大核心思想:loC 和AOP<br>loC :控制反转，Spring容器可以完成对象的创建、属性注入、对象管理等工作</p>
<p>AOP :面向切面，在不修改原有业务逻辑的情况下，实现原有业务的增强</p>
<h2 id="6-1：spring-可以-对mybatis-提供哪些支持？"><a href="#6-1：spring-可以-对mybatis-提供哪些支持？" class="headerlink" title="6.1：spring 可以 对mybatis 提供哪些支持？"></a>6.1：spring 可以 对mybatis 提供哪些支持？</h2><h3 id="6-1-1、SpringIoc"><a href="#6-1-1、SpringIoc" class="headerlink" title="6.1.1、SpringIoc"></a>6.1.1、SpringIoc</h3><ul>
<li>需要创建数据源DataSource</li>
<li>需要创建SqlSessionFactory对象</li>
<li>需要创建SqlSession对象</li>
<li>需要创建DAO对象(Mapper)</li>
</ul>
<p><strong>SpringIoc可以为Mybatis完成DataSource、SqlSessionFactory、DAO的对象创建</strong></p>
<h3 id="6-1-2、SpringAop"><a href="#6-1-2、SpringAop" class="headerlink" title="6.1.2、SpringAop"></a>6.1.2、SpringAop</h3><p><strong>可以使用Spring提供的事务管理切面类完成对mybaits的数据库操作中的事务管理</strong></p>
<h2 id="6-2、Spring整合Mybatis的准备"><a href="#6-2、Spring整合Mybatis的准备" class="headerlink" title="6.2、Spring整合Mybatis的准备"></a>6.2、Spring整合Mybatis的准备</h2><ul>
<li>创建maven项目</li>
<li>部署mybatis框架<ul>
<li>mysql的驱动包</li>
<li>mybatis</li>
</ul>
</li>
<li>创建配置文件无需进行任何配置</li>
</ul>
<p>​	</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>部署spring框架<ul>
<li>添加依赖</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>添加spring 的依赖文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.dhj&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    使用注解配置的aop代理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span> <span class="attr">proxy-target-class</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在我们的项目中添加Spring整合Mybatis的依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-3Spring整合Mybatis的配置"><a href="#6-3Spring整合Mybatis的配置" class="headerlink" title="6.3Spring整合Mybatis的配置"></a>6.3Spring整合Mybatis的配置</h2><h3 id="6-3-1-整合Druid连接池"><a href="#6-3-1-整合Druid连接池" class="headerlink" title="6.3.1 整合Druid连接池"></a>6.3.1 整合Druid连接池</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-3-2创建db-properties文件"><a href="#6-3-2创建db-properties文件" class="headerlink" title="6.3.2创建db.properties文件"></a>6.3.2创建db.properties文件</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">druid.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis-study?USESSL=false&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="attr">druid.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">druid.password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">druid.Driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#连接池参数</span></span><br><span class="line"><span class="comment">#初始话连接池</span></span><br><span class="line"><span class="attr">druid.pool.init</span>=<span class="string">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">druid.pool.minIdle</span>=<span class="string">3</span></span><br><span class="line"></span><br><span class="line"><span class="attr">druid.pool.maxActive</span>=<span class="string">20</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 30秒过后我就不等待了</span></span><br><span class="line"><span class="attr">druid.pool.timeout</span>=<span class="string">30000</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-3在applicationContext-xml中配置连接源"><a href="#6-3-3在applicationContext-xml中配置连接源" class="headerlink" title="6.3.3在applicationContext.xml中配置连接源"></a>6.3.3在applicationContext.xml中配置连接源</h3><p>依赖spring容器来创建</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    加载这个db.properties的文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    配置数据库连接池的连接源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.Driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.pool.maxActive&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.pool.minIdle&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;druid.pool.timeout&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-4依赖Spring-容器来获取SqlSessionFactory的配置"><a href="#6-3-4依赖Spring-容器来获取SqlSessionFactory的配置" class="headerlink" title="6.3.4依赖Spring 容器来获取SqlSessionFactory的配置"></a>6.3.4依赖Spring 容器来获取SqlSessionFactory的配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置mapper 文件的路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mappers/*Mapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.dhj.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置mybatis-config 的路径如果里面有内容的话有一些配置的话spring也会自己去扫描--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-5-整合mybatis中的配置mapper"><a href="#6-3-5-整合mybatis中的配置mapper" class="headerlink" title="6.3.5 整合mybatis中的配置mapper"></a>6.3.5 整合mybatis中的配置mapper</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    加载dao中包中的所有接口 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.dhj.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样之后就可以在spring容器中自动有了dao中的所有接口对象</p>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        SqlSessionFactory sqlSessionFactory = (SqlSessionFactory) context.getBean(&quot;sqlSessionFactory&quot;);</span></span><br><span class="line"><span class="comment">//        SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class="line"><span class="comment">//        UserDao userDao = sqlSession.getMapper(UserDao.class);</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) context.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        List&lt;User&gt; users = userDao.queryUsers();</span><br><span class="line">        <span class="keyword">for</span> (User u:users</span><br><span class="line">             ) &#123;</span><br><span class="line">            System.out.println(u);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(userDao);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2022/04/21/Spring/image-20220409001352508.png" alt="image-20220409001352508"></p>
<p><strong>注意：这里面从bean中取出来的dao对象默认是首字母改为小写</strong></p>
<p><strong>如：UserDao类在取出的时候就是userDao</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) context.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<p>service需要dao不需要new了spring容器给他注入</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserviceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">listUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.queryUsers();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserviceImpl</span> <span class="variable">userviceImpl</span> <span class="operator">=</span> (UserviceImpl) context.getBean(<span class="string">&quot;userviceImpl&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userviceImpl.listUsers();</span><br><span class="line">    <span class="keyword">for</span> (User u : users) &#123;</span><br><span class="line">        System.out.println(u);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/21/Spring/image-20220409124422226.png" alt="image-20220409124422226"></p>
<h3 id="6-3-6-整合mybatis中的配置Aop配置"><a href="#6-3-6-整合mybatis中的配置Aop配置" class="headerlink" title="6.3.6 整合mybatis中的配置Aop配置"></a>6.3.6 整合mybatis中的配置Aop配置</h3><ul>
<li><p>将spring提供的事务管理类配置给spring容器</p>
</li>
<li><p>tx引入</p>
</li>
<li><p>&#96;&#96;&#96;xml<br>xmlns:tx&#x3D;”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/tx&quot;">http://www.springframework.org/schema/tx&quot;</a></p>
<p><a target="_blank" rel="noopener" href="http://www.springframework.org/schema/tx/">http://www.springframework.org/schema/tx/</a><br>     <a target="_blank" rel="noopener" href="http://www.springframework.org/schema/tx/spring-tx.xsd">http://www.springframework.org/schema/tx/spring-tx.xsd</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">```xml</span><br><span class="line"> &lt;!--1将spring提供的事务管理类配置给spring容器--&gt;</span><br><span class="line">    &lt;bean class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot; id=&quot;transactionManager&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;druidDataSource&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!--2通过spring提供的tx标签声明策略--&gt;</span><br><span class="line">    &lt;tx:advice id=&quot;txadvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;</span><br><span class="line">        &lt;tx:attributes&gt;</span><br><span class="line">&lt;!--            只要是insert 开头的方法 isolation 隔离级别  propagation 事务的传播机制 --&gt;</span><br><span class="line">            &lt;tx:method name=&quot;insert*&quot; isolation=&quot;REPEATABLE_READ&quot; propagation=&quot;REQUIRED&quot;/&gt;</span><br><span class="line">            &lt;tx:method name=&quot;query*&quot; isolation=&quot;REPEATABLE_READ&quot; propagation=&quot;SUPPORTS&quot;/&gt;</span><br><span class="line">        &lt;/tx:attributes&gt;</span><br><span class="line">    &lt;/tx:advice&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="6-3-7事务的隔离级别："><a href="#6-3-7事务的隔离级别：" class="headerlink" title="6.3.7事务的隔离级别："></a>6.3.7事务的隔离级别：</h3><p>isolation设置事务隔离级别:</p>
<p>READ_UNCONWITTED ,读未提交</p>
<p>READ_COWITTED ，读已提交</p>
<p>REPEATABLE_READ , 可重复读的</p>
<p>SERIALIZABLEpropagation 串行化</p>
<p><img src="/2022/04/21/Spring/image-20220409144113614.png" alt="image-20220409144113614"></p>
<h3 id="6-3-8事务的传播机制："><a href="#6-3-8事务的传播机制：" class="headerlink" title="6.3.8事务的传播机制："></a>6.3.8事务的传播机制：</h3><p>设置事务的传播杌制<br>REQUIRED：如果上层方法没有事务，则创建一个新的事务:如果已经存在事务，则j入到事务中。</p>
<p>SUPPORTS：如果上层方法没有事务，则以非事务方式执行;如果已经存在事务，则加入到事务中。<br>REQUIRES_NEW：如果上层方法没有事务，则创建一个新的事务:如果已经存在事务，则将当前事务挂起。</p>
<p>NOT_SUPPORTED：如果上层方法没有事务，则以非事务方式执行:如果已经存在事务，则将当前事务挂起。</p>
<p>NEVER:如果上层没有事务，则以非事务的方式去执行，如果有事务则抛出异常</p>
<p>MANDATORY:如果上层存在事务就加入到事务里去，不存在则抛出异常</p>
<p>NESTED:如果上层没有事务，则创建一个新的事务，如果有事务则嵌套到到当前事务中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">    <span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1将spring提供的事务管理类配置给spring容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2通过spring提供的tx标签声明策略--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            只要是insert 开头的方法 isolation 隔离级别  propagation 事务的传播机制 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;insert*&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query*&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;SUPPORTS&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete*&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--3、切入点的定义--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;crud&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.dhj.service.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;crud&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-9基于注解的AOP配置"><a href="#6-3-9基于注解的AOP配置" class="headerlink" title="6.3.9基于注解的AOP配置"></a>6.3.9基于注解的AOP配置</h3><ul>
<li>事务管理类还是需要交给spring管理</li>
<li>加个注解配置的xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- more bean definitions go here --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1将spring提供的事务管理类配置给spring容器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    2、声明采用注解来配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后就可以采用注解配置（在需要事务管理的方法上加上 @Transactional 然后赋值就行）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserviceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">        <span class="meta">@Transactional(isolation = Isolation.REPEATABLE_READ,propagation = Propagation.SUPPORTS)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">listUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.queryUsers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">DaiHaojun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://daihaojun554.github.io/2022/04/21/Spring/">http://daihaojun554.github.io/2022/04/21/Spring/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%A1%86%E6%9E%B6/">框架</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/04/21/HiveDemo/"><i class="fa fa-chevron-left">  </i><span>HiveDemo</span></a></div><div class="next-post pull-right"><a href="/2022/04/21/MyBatis/"><span>MyBatis</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2022 By DaiHaojun</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://daihaojun.top">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://lib.baomitu.com/animejs/latest/anime.min.js"></script><script src="https://lib.baomitu.com/jquery/latest/jquery.min.js"></script><script src="https://lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script src="https://lib.baomitu.com/velocity/latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>